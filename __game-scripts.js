var SelecionarPapel=pc.createScript("selecionarPapel");SelecionarPapel.attributes.add("cameraEntity",{type:"entity"}),SelecionarPapel.attributes.add("tamparcamera",{type:"entity"}),SelecionarPapel.attributes.add("limparcamera",{type:"entity"}),SelecionarPapel.prototype.initialize=function(){this.materialAtual=null,this.materialLimpar=null,this.opacidadeAlvo=1,this.opacidadeAtual=0,this.fazendoFadeIn=!1,this.fazendoFadeOut=!1,this.opacidadeLimpar=1,this.triggerdecamera=!1,this.naovoltarcamera=!1,this.nas_opcoes=!1,this.telademenu2=!0,this.app.podeclicar=!0,this.app.podeclicar2=!0,this.app.fire("selecionarPapel:pronto",this),this.papelSubindo=!1,this.papelDescendo=!1,this.mouseEmCima=!1,this.posicaoOriginal=this.entity.getLocalPosition().clone(),this.posicaoAlvo=this.posicaoOriginal.clone().add(pc.Vec3.ZERO),this.movimentarCamera=this.cameraEntity.script.movimentarCamera,this.mudarcameraaqui=!1,setTimeout((()=>{console.log("tampa do teu cu viado trolei "+this.tamparcamera)}),1e3),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this)},SelecionarPapel.prototype.update=function(a){this.triggerdecamera&&(this.triggerdecamera=!1,this.naovoltarcamera=!0,this.fazendoFadeIn=!0,this.mudandocamera()),this.fazendoFadeIn&&this.materialAtual&&(this.opacidadeAtual=pc.math.lerp(this.opacidadeAtual,this.opacidadeAlvo,1.5*a),this.materialAtual.opacity=this.opacidadeAtual,this.materialAtual.update(),Math.abs(this.opacidadeAtual-this.opacidadeAlvo)<.01&&(console.log("FadeIn completo! Iniciando FadeOut..."),this.materialAtual.opacity=this.opacidadeAlvo,this.materialAtual.update(),this.fazendoFadeIn=!1,this.fazendoFadeOut=!0)),this.fazendoFadeOut&&this.materialLimpar&&(console.log("executando fade out"),this.opacidadeLimpar=pc.math.lerp(this.opacidadeLimpar,0,1.5*a),this.materialLimpar.opacity=this.opacidadeLimpar,this.materialLimpar.update(),this.opacidadeLimpar<.01&&(this.materialLimpar.opacity=0,this.materialLimpar.update(),this.fazendoFadeOut=!1)),this.papelSubindo?this.moverParaPosicao(this.posicaoAlvo,a):this.papelDescendo&&this.moverParaPosicao(this.posicaoOriginal,a)},SelecionarPapel.prototype.onMouseMove=function(a){var e=this.app.root.findByName("Camera"),t=e.camera.screenToWorld(a.x,a.y,e.camera.nearClip),i=e.camera.screenToWorld(a.x,a.y,e.camera.farClip),o=this.app.systems.rigidbody.raycastFirst(t,i),s=o&&o.entity===this.entity;s&&!this.mouseEmCima?(this.mouseEmCima=!0,this.onMouseEnter()):!s&&this.mouseEmCima&&(this.mouseEmCima=!1,this.onMouseLeave())},SelecionarPapel.prototype.onMouseDown=function(a){var e=this.cameraEntity.camera,t=e.screenToWorld(a.x,a.y,e.nearClip),i=e.screenToWorld(a.x,a.y,e.farClip),o=this.app.systems.rigidbody.raycastFirst(t,i);o&&o.entity===this.entity&&this.app.podeclicar&&this.app.podeclicar2&&("Papel_Jogar"===this.entity.name?(this.mudandocamera(),this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPapelAceitar(),this.app.podeclicar=!1):"Papel_Opcoes"===this.entity.name?(this.nas_opcoes=!0,this.app.podeclicar2=!1,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPapelAceitar(),this.app.root.findByName("configs").enabled=!0,this.app.root.findByName("pasta").enabled=!1,console.log("mudou nasopcaos para true")):"Papel_Credtos"===this.entity.name&&(this.app.root.findByName("WIP").enabled=!0,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playDenied(),setTimeout((()=>{this.app.root.findByName("WIP").enabled=!1}),1e3),console.log("mudou nasopcaos para true")))},SelecionarPapel.prototype.mudandocamera=function(){this.tamparcamera?this.limparcamera?(this.tamparcamera.render?this.tamparcamera.render.meshInstances.length>0?this.materialAtual=this.tamparcamera.render.meshInstances[0].material:console.warn("Render existe, mas sem meshInstances"):this.tamparcamera.model?this.tamparcamera.model.meshInstances.length>0?this.materialAtual=this.tamparcamera.model.meshInstances[0].material:console.warn("Model existe, mas sem meshInstances"):console.log("Nem render, nem model, tamparcamera tá pelada"),this.limparcamera.render&&this.limparcamera.render.meshInstances.length>0?this.materialLimpar=this.limparcamera.render.meshInstances[0].material:this.limparcamera.model&&this.limparcamera.model.meshInstances.length>0?this.materialLimpar=this.limparcamera.model.meshInstances[0].material:console.error("A limparcamera não tem componente render/model com meshInstances válidos!"),this.tamparcamera.render&&this.tamparcamera.render.meshInstances.length>0?this.materialAtual=this.tamparcamera.render.meshInstances[0].material:this.tamparcamera.model&&this.tamparcamera.model.meshInstances.length>0?this.materialAtual=this.tamparcamera.model.meshInstances[0].material:console.error("A tamparcamera não tem componente render/model com meshInstances válidos!"),this.materialAtual?(this.materialAtual.blendType=pc.BLEND_NORMAL,this.opacidadeAtual=0,this.opacidadeAlvo=1,this.fazendoFadeIn=!0):console.error("Não foi possível acessar o material de tamparcamera!"),this.materialLimpar?this.materialLimpar.blendType=pc.BLEND_NORMAL:console.error("Não foi possível acessar o material de limparcamera!"),this.naovoltarcamera||(console.log("ENTROU NO LAÇO"),this.app.root.findByName("MusicaMenu").script.backgroundMusic.jamudoumusicamenuout=!0,setTimeout((()=>{this.cameraEntity.script.movimentarCamera.videoprol=!0,console.log(this.cameraEntity.script.movimentarCamera.videoprol),this.mudarcameraaqui=!0}),3e3),console.log("PASSOU NO LAÇO"))):console.log("ERRO: this.limparcamera é null ou undefined!"):console.log("ERRO: this.tamparcamera é null ou undefined!")},SelecionarPapel.prototype.onMouseEnter=function(){this.posicaoAlvo.copy(this.posicaoOriginal).add(new pc.Vec3(0,.5,-.06)),this.papelSubindo=!0,this.papelDescendo=!1},SelecionarPapel.prototype.onMouseLeave=function(){this.papelSubindo=!1,this.papelDescendo=!0},SelecionarPapel.prototype.moverParaPosicao=function(a,e){var t=this.entity.getLocalPosition(),i=(new pc.Vec3).lerp(t,a,5*e);this.entity.setLocalPosition(i),t.distance(a)<.01&&(this.papelSubindo=!1,this.papelDescendo=!1,this.entity.setLocalPosition(a))};var ClicarCarta=pc.createScript("clicarCarta");ClicarCarta.attributes.add("moveTarget",{type:"vec3",default:[0,0,0]}),ClicarCarta.attributes.add("RotacaoTarget",{type:"vec3",default:[0,0,0]}),ClicarCarta.attributes.add("cameraEntity",{type:"entity"}),ClicarCarta.attributes.add("espacocarta1",{type:"entity"}),ClicarCarta.attributes.add("espacocarta2",{type:"entity"}),ClicarCarta.attributes.add("espacocarta3",{type:"entity"}),ClicarCarta.attributes.add("espacocarta4",{type:"entity"}),ClicarCarta.attributes.add("espacocarta5",{type:"entity"}),ClicarCarta.prototype.initialize=function(){this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.speed=5,this.posicaoOriginal=this.entity.getLocalPosition().clone(),this.cartatabu=!1,this.interacao=!0,this.movimentarCamera=this.cameraEntity.script.movimentarCamera,this.qualespaco=0,this.clicarcartavariavel=!1,this.cameratabu=this.app.root.findByName("CameraTabu"),this.estanotabuvar=this.cameratabu.script.movimentarCameraTabu.estanotabu,this.cartaSubida=!1,this.moveTarget||(console.error("Atenção: moveTarget não foi configurado no PlayCanvas Editor!"),this.moveTarget=new pc.Vec3(0,0,0)),this.RotacaoTarget||(console.error("Atenção: Rotacao Target não foi configurado no PlayCanvas Editor!"),this.RotacaoTarget=new pc.Vec3(0,0,0)),this.targetPosition=(new pc.Vec3).copy(this.moveTarget),this.moving=!1},ClicarCarta.prototype.update=function(t){if(this.moving){console.log("ta executano?");var a=this.entity.getEulerAngles(),i=this.entity.getPosition();i.lerp(i,this.targetPosition,5*t),a.lerp(a,this.RotacaoTarget,3*t),this.entity.setPosition(i),this.entity.setEulerAngles(a),i.distance(this.targetPosition)<.01&&(this.moving=!1)}},ClicarCarta.prototype.onMouseDown=function(t){if(this.clicarcartavariavel){var a=this.cameraEntity.camera,i=a.screenToWorld(t.x,t.y,a.nearClip),e=a.screenToWorld(t.x,t.y,a.farClip),r=this.app.systems.rigidbody.raycastFirst(i,e);r&&r.entity===this.entity&&!this.movimentarCamera.comprarcarta&&this.movimentarCamera.podecomprar&&(this.movimentarCamera.vaijogar=!0,this.movimentarCamera.mostrandoCarta=!0,this.movimentarCamera.podecomprar=!1,this.movimentarCamera.comprarcarta=!0,this.movimentarCamera.qualTarget(),this.moveObject(),this.cartatabu=!0),console.log(this.espacocarta1),console.log(this.interacao),console.log(this.movimentarCamera.vaijogar),this.movimentarCamera.podecomprar&&(r&&r.entity===this.espacocarta1&&this.interacao&&this.movimentarCamera.vaijogar&&this.cartatabu&&(this.qualespaco=1,this.DefinirTarget(),this.moveObject(),this.interacao=!1,this.movimentarCamera.vaijogar=!1),r&&r.entity===this.espacocarta2&&this.interacao&&this.movimentarCamera.vaijogar&&this.cartatabu&&(this.qualespaco=2,this.DefinirTarget(),this.moveObject(),this.interacao=!1),r&&r.entity===this.espacocarta3&&this.interacao&&this.movimentarCamera.vaijogar&&this.cartatabu&&(this.qualespaco=3,this.DefinirTarget(),this.moveObject(),this.interacao=!1),r&&r.entity===this.espacocarta4&&this.interacao&&this.movimentarCamera.vaijogar&&this.cartatabu&&(this.qualespaco=4,this.DefinirTarget(),this.moveObject(),this.interacao=!1),r&&r.entity===this.espacocarta5&&this.interacao&&this.movimentarCamera.vaijogar&&this.cartatabu&&(this.qualespaco=5,this.DefinirTarget(),this.moveObject(),this.interacao=!1))}},ClicarCarta.prototype.onMouseMove=function(t){var a=this.app.root.findByName("Camera"),i=a.camera.screenToWorld(t.x,t.y,a.camera.nearClip),e=a.camera.screenToWorld(t.x,t.y,a.camera.farClip),r=this.app.systems.rigidbody.raycastFirst(i,e);r&&r.entity===this.entity&&!this.cartaSubida&&this.estanotabuvar?(this.SubirCarta(),this.cartaSubida=!0):r&&r.entity===this.entity||this.cartaSubida&&(this.VoltarCarta(),this.cartaSubida=!1)},ClicarCarta.prototype.SubirCarta=function(t){var a=this.entity.getLocalPosition();this.entity.setLocalPosition(a.x,a.y+12,a.z+15)},ClicarCarta.prototype.VoltarCarta=function(){this.entity.setLocalPosition(this.posicaoOriginal)},ClicarCarta.prototype.DefinirTarget=function(){console.log("ta abrindo o cu DEMAIS"),1===this.qualespaco?(this.targetPosition=new pc.Vec3(-.946,.306,1.096),this.targetRotation=(new pc.Quat).setFromEulerAngles(0,0,0),console.log("linharodada")):2===this.qualespaco?(this.targetPosition=new pc.Vec3(-.423,.306,1.096),this.targetRotation=(new pc.Quat).setFromEulerAngles(0,0,0)):3===this.qualespaco?(this.targetPosition=new pc.Vec3(.097,.306,1.096),this.targetRotation=(new pc.Quat).setFromEulerAngles(0,0,0)):4===this.qualespaco?(this.targetPosition=new pc.Vec3(.587,.306,1.096),this.targetRotation=(new pc.Quat).setFromEulerAngles(0,0,0)):5===this.qualespaco&&(this.targetPosition=new pc.Vec3(1.096,.306,1.096),this.targetRotation=(new pc.Quat).setFromEulerAngles(0,0,0))},ClicarCarta.prototype.moveObject=function(){console.log("Movendo a carta..."),this.moving=!0};var MovimentarCamera=pc.createScript("movimentarCamera");MovimentarCamera.prototype.initialize=function(){this.mostrandoCarta=!0,this.comprarcarta=!1,this.podecomprar=!1,this.teclapressionada=!1,this.vaijogar=!0,this.telamenu=!1,this.timer=0,this.sairdoloop=!1,this.comecatempo=!1,this.estabaralho=!1,this.desativartabu=!0,this.videoprol=!1,this.targetPosition=new pc.Vec3(1.75,2.46,3.24),this.targetRotation=(new pc.Quat).setFromEulerAngles(-47,-14,0),this.telamenu?(this.startPosition=new pc.Vec3(-1802.53,296.599,-3.16),this.startRotation=(new pc.Quat).setFromEulerAngles(-90,0,0)):(this.startPosition=new pc.Vec3(.275,2.465,4.33),this.startRotation=(new pc.Quat).setFromEulerAngles(-31.5,.8,0)),this.currentPosition=this.startPosition.clone(),this.currentRotation=this.startRotation.clone(),this.lerpSpeed=2,this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this)},MovimentarCamera.prototype.onKeyDown=function(t){t.key!==pc.KEY_D||this.mostrandoCarta||this.vaijogar||this.telamenu||!this.estabaralho||this.desativartabu||(this.mostrandoCarta=!0,this.comprarcarta=!0,this.podecomprar=!0,this.vaijogar=!1,this.qualTarget(),console.log("Câmera se movendo para mostrar a carta...")),t.key===pc.KEY_S&&this.mostrandoCarta&&!this.telamenu&&this.estabaralho&&!this.desativartabu&&(this.mostrandoCarta=!1,this.comprarcarta=!0,this.podecomprar=!1,this.vaijogar=!1,this.qualTarget(),console.log("Câmera voltando para a posição inicial...")),t.key!==pc.KEY_W||this.mostrandoCarta||this.jogar||this.telamenu||!this.estabaralho||this.desativartabu||(this.vaijogar=!0,this.qualTarget(),console.log("Câmera indo pro meio do tabu.."))},MovimentarCamera.prototype.qualTarget=function(){console.log("ta abrindo o cu"),this.vaijogar?(this.targetPosition=new pc.Vec3(0,2.46,2.62),this.targetRotation=(new pc.Quat).setFromEulerAngles(-55.5,.8,0),console.log("linharodada"),this.mostrandoCarta=!0,this.comprarcarta=!0,this.podecomprar=!0):(this.targetPosition=new pc.Vec3(1.75,2.46,3.24),this.targetRotation=(new pc.Quat).setFromEulerAngles(-47,-14,0))},MovimentarCamera.prototype.movermenu=function(){this.startPosition=new pc.Vec3(-1802.53,296.599,-3.16),this.startRotation=(new pc.Quat).setFromEulerAngles(-90,0,0),this.targetPosition=new pc.Vec3(-1802.53,67.055,-3.16),this.targetRotation=(new pc.Quat).setFromEulerAngles(-90,0,0),this.currentPosition=this.startPosition.clone(),this.currentRotation=this.startRotation.clone(),this.comprarcarta=!0,this.mostrandoCarta=!0,console.log("trocou todos as variaveis")},MovimentarCamera.prototype.movertabu=function(){this.entity.setLocalPosition(.717,2.419,4.56),this.entity.setLocalEulerAngles(-28.7,0,0),this.currentPosition=this.startPosition.clone(),this.currentRotation=this.startRotation.clone(),this.comprarcarta=!0,this.mostrandoCarta=!0,console.log("movendo para tabu")},MovimentarCamera.prototype.toggleVideoProl=function(t){this.videoprol=t,console.log("Videoprol está "+(this.videoprol?"ativado":"desativado"))},MovimentarCamera.prototype.update=function(t){if(this.videoprol)return this.entity.setLocalPosition(-1802.53,295.669,528.898),void this.entity.setLocalRotation((new pc.Quat).setFromEulerAngles(-90,0,0));this.timer+=t,this.timer>=36&&!this.sairdoloop&&this.comecatempo&&(console.log("pasosu 36 segundos"),this.movermenu(),this.timer=0,this.sairdoloop=!0,this.lerpSpeed=5),this.comprarcarta&&(this.mostrandoCarta?(this.currentPosition.lerp(this.currentPosition,this.targetPosition,t*this.lerpSpeed),this.currentRotation.slerp(this.currentRotation,this.targetRotation,t*this.lerpSpeed)):(this.currentPosition.lerp(this.currentPosition,this.startPosition,t*this.lerpSpeed),this.currentRotation.slerp(this.currentRotation,this.startRotation,t*this.lerpSpeed)),this.entity.setLocalPosition(this.currentPosition),this.entity.setLocalRotation(this.currentRotation),this.mostrandoCarta&&this.currentPosition.distance(this.targetPosition)<.01&&this.currentRotation.equals(this.targetRotation,.05)&&(this.comprarcarta=!1,this.sairdoloop&&(this.lerpSpeed=2,console.log("mudou lerp speed")),console.log("Posição de carta atingida!")),!this.mostrandoCarta&&this.currentPosition.distance(this.startPosition)<.01&&this.currentRotation.equals(this.startRotation,.05)&&(this.comprarcarta=!1,console.log("Câmera voltou à posição inicial!")))};var ClicarLoja=pc.createScript("clicarLoja");ClicarLoja.attributes.add("cameraEntity",{type:"entity"}),ClicarLoja.attributes.add("moveTarget",{type:"vec3",default:[0,0,0]}),ClicarLoja.attributes.add("RotacaoTarget",{type:"vec3",default:[0,0,0]}),ClicarLoja.prototype.initialize=function(){this.cameraEntity=this.app.root.findByName("Camera"),this.movimentarCamera=this.cameraEntity.script.movimentarCamera,this.startPosition=new pc.Vec3(1.974,.306,1.326),this.startRotation=(new pc.Quat).setFromEulerAngles(90,0,0),this.targetPosition=new pc.Vec3(-170,-165,75),this.targetRotation=(new pc.Quat).setFromEulerAngles(180,220,90),this.currentPosition=this.startPosition.clone(),this.currentRotation=this.startRotation.clone(),this.lerpSpeed=5,this.moving=!1,this.belezura=!1,console.log("teste"),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.mouseDentro=!1},ClicarLoja.prototype.update=function(t){this.moving&&(this.belezura?(this.currentPosition.lerp(this.currentPosition,this.targetPosition,t*this.lerpSpeed),this.currentRotation.slerp(this.currentRotation,this.targetRotation,t*this.lerpSpeed)):(this.currentPosition.lerp(this.currentPosition,this.startPosition,t*this.lerpSpeed),this.currentRotation.slerp(this.currentRotation,this.startRotation,t*this.lerpSpeed)),this.entity.setLocalPosition(this.currentPosition),this.entity.setLocalRotation(this.currentRotation),this.belezura&&this.currentPosition.distance(this.targetPosition)<.01&&this.currentRotation.equals(this.targetRotation,.05)&&(this.moving=!1,console.log("Posição de carta atingida!")),!this.belezura&&this.currentPosition.distance(this.startPosition)<.01&&this.currentRotation.equals(this.startRotation,.05)&&(console.log("Câmera voltou à posição inicial!"),this.movimentarCamera.comprarcarta=!1))},ClicarLoja.prototype.onMouseDown=function(t){var o=this.cameraEntity.camera,i=o.screenToWorld(t.x,t.y,o.nearClip),e=o.screenToWorld(t.x,t.y,o.farClip),a=this.app.systems.rigidbody.raycastFirst(i,e);a&&a.entity===this.entity&&this.movimentarCamera.podecomprar&&(console.log("clicando"),this.moveObjecteCamera(),this.moving=!0)},ClicarLoja.prototype.onMouseMove=function(t){var o=this.app.root.findByName("Camera"),i=o.camera.screenToWorld(t.x,t.y,o.camera.nearClip),e=o.camera.screenToWorld(t.x,t.y,o.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(i,e);a&&a.entity===this.entity?this.mouseDentro||(this.mouseDentro=!0,document.body.style.cursor="pointer"):this.mouseDentro&&(this.mouseDentro=!1,document.body.style.cursor="default")},ClicarLoja.prototype.moveObjecteCamera=function(){console.log("Movendo a carta..."),console.log("podecomprar:",this.movimentarCamera.podecomprar),this.belezura=!0,this.movimentarCamera.mostrandoCarta=!1,this.movimentarCamera.comprarcarta=!0,this.movimentarCamera.podecomprar=!1};var Carta=pc.createScript("carta");Carta.prototype.initialize=function(){},Carta.prototype.update=function(t){};var VideoTexture=pc.createScript("videoTexture");VideoTexture.attributes.add("videoAsset",{type:"asset"}),VideoTexture.attributes.add("cameraEntity",{type:"entity"}),VideoTexture.attributes.add("musicaback",{type:"entity"}),VideoTexture.prototype.initialize=function(){var e=this.videoAsset;this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.movimentarCamera=this.cameraEntity.script.movimentarCamera;var t=e.getFileUrl();this.video=document.createElement("video"),this.video.src=t,this.video.loop=!1,this.video.muted=!1,this.video.playsInline=!0,this.video.crossOrigin="anonymous",this.japassouaqui=!0,this.videoTexture=new pc.Texture(this.app.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,autoMipmap:!0});var i=this.entity.model.meshInstances[0].material;i.diffuseMap=this.videoTexture,i.update()},VideoTexture.prototype.onMouseDown=function(){this.japassouaqui&&(this.musicaback.script.backgroundMusic.musicSlot.play(),this.video.play(),this.movimentarCamera.comecatempo=!0,this.movimentarCamera.timer=0,setTimeout((()=>{this.video.muted=!0}),4e4),this.japassouaqui=!1)},VideoTexture.prototype.update=function(e){this.video.readyState>=this.video.HAVE_CURRENT_DATA&&this.videoTexture.setSource(this.video)};var BackgroundMusic=pc.createScript("backgroundMusic");BackgroundMusic.attributes.add("selecionarpapelplay",{type:"entity"}),BackgroundMusic.prototype.initialize=function(){this.diminuirvolume=!1,this.jacancelou=!1,this.passouja=!1,this.choveminhachuva=!1,this.menuteste=this.app.root.findByName("Menu_teste2"),this.papeljogar=this.menuteste.findByName("Papel_Jogar"),this.jamudoucamera=!1,this.japassoucamera=!1,this.jamudoutrovao=!1,this.japassoutrovao=!1,this.jamudoumusicaback=!1,this.japassoumusicaback=!1,this.jamudoumusicamenuout=!1,this.japassoumusicamenuout=!1,this.quadrotarefapassou=!1,this.japassouquadro=!1,this.debugtempo=1,this.quadrotarefa=this.app.root.findByName("tela_tarefas").script.scriptTarefas,this.entity.sound||this.entity.addComponent("sound"),this.musicSlot=this.entity.sound.slots.nossamusica;var s=this.entity.sound.slots.musicabackground,a=this.entity.sound.slots.trovao;this.musicSlot.loop=!0,this.musicSlot.volume=.5,this.musicSlot.stop(),s.loop=!0,s.volume=0,a.loop=!1,a.volume=4,this.app.systems.sound.context.resume(),this.transitionTime=3},BackgroundMusic.prototype.update=function(s){var a=this.entity.sound.slots.musicabackground,o=this.entity.sound.slots.nossamusica,t=this.entity.sound.slots.trovao;this.acessarpapelplay=this.selecionarpapelplay.script.selecionarPapel.telademenu2,this.introprol=this.app.root.findByName("VideoPrologo").script.videoTexture3.japrey,this.jamudoucamera&&!this.japassoucamera&&(this.papeljogar.script.selecionarPapel.mudarcameraaqui=!0,this.jamudoucamera=!this.jamudoucamera,this.japassoucamera=!0),this.jamudoutrovao&&!this.japassoutrovao&&(t.play(),console.log("trovao"),this.jamudoutrovao=!this.jamudoutrovao,this.japassoutrovao=!0),this.jamudoumusicaback&&!this.japassoumusicaback&&(a.play(),this.jamudoumusicaback=!this.jamudoumusicaback,this.japassoumusicaback=!0),this.jamudoumusicamenuout&&!this.japassoumusicamenuout&&(console.log("TA ENTRANDO NO LAÇO POURA"),this.fadeOutMusic(s)),this.jamudoumusicamenuout&&!this.japassoumusicamenuout&&(console.log("TA ENTRANDO NO LAÇO POURA"),this.fadeOutMusic(s)),this.introprol&&!this.jacancelou?this.cancelarsom=!1:this.introprol||this.jacancelou||(this.cancelarsom=!0,this.jacancelou=!0),this.quadrotarefapassou&&!this.japassouquadro&&(this.quadrotarefa.toggleQuadroTarefa(),this.quadrotarefapassou=!1,this.japassouquadro=!0),this.passouja||this.cancelarsom&&(setTimeout((()=>{this.fadeInBackgroundMusic(s),this.jamudoumusicaback=!0}),3e3),setTimeout((()=>{this.choveminhachuva=!0}),53e3/this.debugtempo),setTimeout((()=>{this.jamudoutrovao=!0}),56800/this.debugtempo),setTimeout((()=>{this.app.root.findByName("VideoPrologo").enabled=!1,this.papeljogar.script.selecionarPapel.telademenu2=!1,this.quadrotarefapassou=!0}),57560/this.debugtempo),setTimeout((()=>{t.stop(),this.passouja=!0}),6e4/this.debugtempo)),this.diminuirvolume&&!this.passouja?this.fadeOutBackgroundMusic(s):this.diminuirvolume||this.passouja||this.fadeInBackgroundMusic(s),0===o.volume&&0===a.volume&&a.play()},BackgroundMusic.prototype.fadeOutMusic=function(s){var a=this.entity.sound.slots.nossamusica;a.volume>0?a.volume-=s/this.transitionTime:(a.volume=0,this.japassoumusicamenuout=!0,this.jamudoumusicamenuout=!this.jamudoumusicamenuout)},BackgroundMusic.prototype.fadeInBackgroundMusic=function(s){var a=this.entity.sound.slots.musicabackground;a.volume<.5?a.volume+=s/this.transitionTime:(a.volume=.5,this.passouja=!1)},BackgroundMusic.prototype.fadeOutBackgroundMusic=function(s){var a=this.entity.sound.slots.musicabackground;console.log("cual o valor dessaporra "+a.volume),a.volume>0?(console.log("ta entrando aqui? "),a.volume-=.1):a.volume=0},BackgroundMusic.prototype.mudarVolume=function(s){this.cancelarsom=s},BackgroundMusic.prototype.alterarVolume=function(s){this.diminuirvolume=s};var MovimentarPlayer=pc.createScript("movimentarPlayer");MovimentarPlayer.attributes.add("spriteEntity",{type:"entity"}),MovimentarPlayer.attributes.add("selecionarpapelplay",{type:"entity"}),MovimentarPlayer.attributes.add("controledacamera",{type:"entity"}),MovimentarPlayer.attributes.add("seinteragiu",{type:"entity"}),MovimentarPlayer.attributes.add("parede",{type:"entity"}),MovimentarPlayer.attributes.add("tampocamera",{type:"entity"}),MovimentarPlayer.attributes.add("liberocamera",{type:"entity"}),MovimentarPlayer.prototype.initialize=function(){this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this),this.paredesAtuais=new Set,this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.entity.collision.on("collisionend",this.onCollisionEnd,this),this.valorsaturacao=0,this.lanterninhadesliga=this.app.root.findByName("lanternajogador"),this.isWPressed=!1,this.isAPressed=!1,this.isSPressed=!1,this.isDPressed=!1,this.timer=0,this.isPaused=!1,this.ativarsaturacao=!1,this.somusicaestado=!1,this.overlay=this.app.root.findByName("PauseOverlay"),this.acessarlivro=this.app.root.findByName("livro"),this.overlay.enabled=!1,this.lanteraligada=!1,this.foraedrento=!1,this.estaemalgumitem=!1,this.app.itemlanterna=!0,this.app.itemfaca=!1,this.app.itemluminol=!1,this.app.japassouluminolnabanheira=!1,this.japassoujorgequarto1=!1,this.app.japassoucofrequarto1=!1,this.jamudouquartojorge=!1,this.app.japassoudialogojorgegaragem=!1,this.app.jachamoufawn=!1,this.app.jachamoufawn2=!1,this.app.interagiucomcaixa=!1,this.app.japassounoalicate=!1,this.app.itemchavedefenda=!1,this.app.telafinalvariavelcamera=!1,this.parado=!0,this.semparede=!0,this.jabateu=!1,this.bateuparede=!1,this.estaemdialogo=!1,this.paredes={cima:!1,baixo:!1,esquerda:!1,direita:!1},this.paredeAtual=null,this.paredeCima=this.app.root.findByName("paredecima"),this.paredeBaixo=this.app.root.findByName("paredebaixo"),this.paredeEsquerda=this.app.root.findByName("paredeesquerda"),this.paredeDireita=this.app.root.findByName("paredireita"),this.ultimaDirecao="baixo",this.velocidadeplayer=2,this.sprite=this.spriteEntity.findComponent("sprite"),this.sprite?this.sprite.play("idle_baixo"):console.error("Componente Sprite não encontrado!"),this.recuando=!1,this.recuoDirecao=null,this.recuoDistancia=.1,this.recuoVelocidade=1},MovimentarPlayer.prototype.iniciarRecuo=function(a){this.recuando=!0,this.recuoDirecao=a},MovimentarPlayer.prototype.onCollisionStart=function(a){"paredecima"===a.other.name?(this.paredes.cima=!0,this.paredeAtual="cima",this.iniciarRecuo("baixo")):"paredebaixo"===a.other.name?(this.paredes.baixo=!0,this.paredeAtual="baixo",this.iniciarRecuo("cima")):"paredeesquerda"===a.other.name?(this.paredes.esquerda=!0,this.paredeAtual="esquerda",this.iniciarRecuo("direita")):"paredireita"===a.other.name&&(this.paredes.direita=!0,this.paredeAtual="direita",this.iniciarRecuo("esquerda"))},MovimentarPlayer.prototype.onCollisionEnd=function(a){"cima"===this.paredeAtual?this.paredes.cima=!1:"baixo"===this.paredeAtual?this.paredes.baixo=!1:"esquerda"===this.paredeAtual?this.paredes.esquerda=!1:"direita"===this.paredeAtual&&(this.paredes.direita=!1),this.paredeAtual=null},MovimentarPlayer.prototype.aplicarRecuo=function(a){var e=this.entity.getLocalPosition(),i=this.recuoVelocidade*a;switch(this.recuoDirecao){case"cima":e.z-=i;break;case"baixo":e.z+=i;break;case"esquerda":e.x-=i;break;case"direita":e.x+=i}this.entity.setLocalPosition(e),this.recuoDistancia-=i,this.recuoDistancia<=0&&(this.recuando=!1,this.recuoDistancia=.3)},MovimentarPlayer.prototype.update=function(a){if(this.recuando)return void this.aplicarRecuo(a);if(this.app.telafinalvariavelcamera){var e=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(e.x,e.y+4,e.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.app.telafinalvariavelcamera=!1}this.fiqueparado=this.seinteragiu.script.seInteragir.passounaportamesmo,this.ativarinteracao=this.seinteragiu.script.seInteragir.colidiuComPlayer,this.ativarinteracaoDebugCartas=this.seinteragiu.script.seInteragir.pikadesalmao,this.acessarpapelplay=this.selecionarpapelplay.script.selecionarPapel.telademenu2,this.telamenu=this.acessarpapelplay;const i=[this.isWPressed,this.isAPressed,this.isSPressed,this.isDPressed].filter((a=>a)).length;if(this.parado=0===i,this.fiqueparado&&(this.parado=!0,console.log("TA PARADO IRMAO TOMA AGUA KKKKKK"+this.parado)),this.telamenu)this.playIdleAnimation();else if(this.parado)this.playIdleAnimation();else if(!this.isWPressed||this.telamenu||this.paredes.cima||this.estaemdialogo||this.isPaused)if(!this.isAPressed||this.telamenu||this.paredes.esquerda||this.estaemdialogo||this.isPaused)if(!this.isSPressed||this.telamenu||this.paredes.baixo||this.estaemdialogo||this.isPaused){if(this.isDPressed&&!this.telamenu&&!this.paredes.direita&&!this.estaemdialogo&&!this.isPaused){this.playAnimation("andano_direita");t=this.entity.getLocalPosition();this.entity.setLocalPosition(t.x+this.velocidadeplayer*a,t.y,t.z)}}else{this.playAnimation("andano_baixo");t=this.entity.getLocalPosition();this.entity.setLocalPosition(t.x,t.y,t.z+this.velocidadeplayer*a)}else{this.playAnimation("andano_esquerda");var t=this.entity.getLocalPosition();this.entity.setLocalPosition(t.x-this.velocidadeplayer*a,t.y,t.z)}else{this.playAnimation("andano_cima");var t=this.entity.getLocalPosition();this.entity.setLocalPosition(t.x,t.y,t.z-this.velocidadeplayer*a)}},MovimentarPlayer.prototype.onKeyDown=function(a){if(!(a.key!==pc.KEY_W||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isWPressed=!0,this.parado=!1,this.ultimaDirecao="cima";var e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");e.enabled=!1,i.enabled=!1,t.enabled=!1}if(!(a.key!==pc.KEY_A||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isAPressed=!0,this.parado=!1,this.ultimaDirecao="esquerda";e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita");var s=this.app.root.findByName("paredecima");e.enabled=!1,i.enabled=!1,s.enabled=!1}if(!(a.key!==pc.KEY_S||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isSPressed=!0,this.parado=!1,this.ultimaDirecao="baixo";s=this.app.root.findByName("paredecima"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");s.enabled=!1,i.enabled=!1,t.enabled=!1}if(!(a.key!==pc.KEY_D||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isDPressed=!0,this.parado=!1,this.ultimaDirecao="direita";s=this.app.root.findByName("paredecima"),e=this.app.root.findByName("paredebaixo"),t=this.app.root.findByName("paredeesquerda");s.enabled=!1,e.enabled=!1,t.enabled=!1}if(!(a.key!==pc.KEY_UP||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isWPressed=!0,this.parado=!1,this.ultimaDirecao="cima";e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");e.enabled=!1,i.enabled=!1,t.enabled=!1}if(!(a.key!==pc.KEY_LEFT||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isAPressed=!0,this.parado=!1,this.ultimaDirecao="esquerda";e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),s=this.app.root.findByName("paredecima");e.enabled=!1,i.enabled=!1,s.enabled=!1}if(!(a.key!==pc.KEY_DOWN||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isSPressed=!0,this.parado=!1,this.ultimaDirecao="baixo";s=this.app.root.findByName("paredecima"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");s.enabled=!1,i.enabled=!1,t.enabled=!1}if(!(a.key!==pc.KEY_RIGHT||this.telamenu||this.estaemdialogo||this.isPaused||this.estaemalgumitem)){this.isDPressed=!0,this.parado=!1,this.ultimaDirecao="direita";s=this.app.root.findByName("paredecima"),e=this.app.root.findByName("paredebaixo"),t=this.app.root.findByName("paredeesquerda");s.enabled=!1,e.enabled=!1,t.enabled=!1}if(a.key===pc.KEY_E&&!this.telamenu&&this.ativarinteracao&&!this.estaemdialogo&&!this.isPaused){var o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),this.app.root.findByName("controleZona").script.controleObj3d.atualizarMultiplasZonas(["Sala","Cozinha"]),setTimeout((()=>{this.chovechuva=this.app.root.findByName("ChuvinhaBoa"),this.chovechuva.enabled=!1,this.entity.setLocalPosition(-110.936,.863,-35.696),console.log(this.liberocamera.getLocalPosition()),console.log(this.tampocamera.getLocalPosition())}),2e3)}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanodegubcarta&&!this.estaemdialogo&&!this.isPaused){o=this.entity.getLocalPosition(),this.app.root.findByName("Camera");this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,setTimeout((()=>{this.app.root.findByName("ObjetoControleCamera").script.controleCamera.ativarcameratabu=!0}),5e3),console.log("penis gordo")}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanopanfleto&&!this.estaemdialogo&&!this.isPaused){o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.controledacamera.enabled=!0,this.controledacamera.script.controleCamera.mudarcameraeaster=!0,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPapelTurn(),console.log("penis gordo")}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanoquarto&&!this.estaemdialogo&&!this.isPaused){this.foraedrento=!this.foraedrento,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPorta();o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.controledacamera.enabled=!0,this.foraedrento?setTimeout((()=>{this.entity.setLocalPosition(-114.25,.863,-37.178),this.app.root.findByName("controleZona").script.controleObj3d.atualizarZona("Quarto")}),2e3):this.foraedrento||setTimeout((()=>{this.entity.setLocalPosition(-112.317,.863,-37.353),this.app.root.findByName("controleZona").script.controleObj3d.atualizarMultiplasZonas(["Sala","Cozinha"]),this.app.japassoucofrequarto1&&!this.jamudouquartojorge&&(this.app.root.findByName("jorgegaragem_colisao").enabled=!0,this.app.root.findByName("Jorge4").enabled=!0,this.app.root.findByName("jorgequarto_colisao").enabled=!1,this.app.root.findByName("Jorge3").enabled=!1,this.app.root.findByName("Jorge1sprite").sprite.flipX=!1,this.jamudouquartojorge=!0)}),2e3),console.log("ta na porta do meu cu a bosta querendo sair HAHHAHAHHA eu to louco")}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanobanheiro&&!this.estaemdialogo&&!this.isPaused){this.foraedrento=!this.foraedrento,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPorta();o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.controledacamera.enabled=!0,this.foraedrento?setTimeout((()=>{this.entity.setLocalPosition(-114.344,.863,-41.375),this.app.root.findByName("controleZona").script.controleObj3d.atualizarZona("Banheiro")}),2e3):this.foraedrento||setTimeout((()=>{this.entity.setLocalPosition(-112.4,.863,-41.375),this.app.root.findByName("controleZona").script.controleObj3d.atualizarMultiplasZonas(["Sala","Cozinha"])}),2e3),console.log("ta na porta do meu cu a bosta querendo sair HAHHAHAHHA eu to louco")}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanagaragem&&!this.estaemdialogo&&!this.isPaused){this.foraedrento=!this.foraedrento,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playPorta();o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.controledacamera.enabled=!0,this.foraedrento?setTimeout((()=>{this.entity.setLocalPosition(-109.633,.863,-46.128),this.app.root.findByName("controleZona").script.controleObj3d.atualizarZona("Garagem")}),2e3):this.foraedrento||setTimeout((()=>{this.entity.setLocalPosition(-111.205,.863,-46.128),this.app.root.findByName("controleZona").script.controleObj3d.atualizarMultiplasZonas(["Sala","Cozinha"])}),2e3),console.log("ta na porta do meu cu a bosta querendo sair HAHHAHAHHA eu to louco")}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanaFaca&&!this.estaemdialogo&&!this.isPaused&&!this.estaemalgumitem)if(this.app.conversoucomjorge1)this.app.conversoucomjorge1&&this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(7);else{o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,setTimeout((()=>{this.app.root.findByName("tela_faca_tutorial").enabled=!0,this.app.root.findByName("colisorfaca").enabled=!0,this.app.root.findByName("colisorcadeado").enabled=!1;const a=this.app.root.findByName("CameraObj");a.script&&a.script.vignette&&(a.script.vignette.enabled=!0),a.script&&a.script.sepia&&(a.script.vignette.enabled=!0),a.enabled=!0,this.app.camera_objetos=!0,this.estaemalgumitem=!0}),2e3),setTimeout((()=>{this.app.tempobotaoWS=!0}),9e3)}if(a.key===pc.KEY_E&&!this.telamenu&&this.app.estanaBanheira&&!this.estaemdialogo&&!this.isPaused)if(this.app.itemluminol&&!this.app.japassouluminolnabanheira){o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,console.log("você tem o luminol"),this.telamenu=!0,this.app.japassouluminolnabanheira=!0,setTimeout((()=>{this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playRiser(),this.app.root.findByName("Sangue_banheira").enabled=!0}),2e3),setTimeout((()=>{this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(9),this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),this.app.root.findByName("Jorge1").enabled=!1,this.app.root.findByName("Jorge3").enabled=!0,this.app.root.findByName("jorgequarto_colisao").enabled=!0,this.telamenu=!1}),4e3)}else this.app.japassouluminolnabanheira?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(10):this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(8);if(a.key!==pc.KEY_E||this.telamenu||!this.app.estanoJorgeQuarto1||this.estaemdialogo||this.isPaused||(this.japassoujorgequarto1?this.app.jaexplorouquartoJorgeQuarto1?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(15):this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(14):(this.app.root.findByName("Jorge3sprite").sprite.flipX=!0,this.app.root.findByName("InteragirJorgeQuarto1").enabled=!1,this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(11),this.japassoujorgequarto1=!0)),a.key!==pc.KEY_E||this.telamenu||!this.app.estanoCofreQuarto||this.estaemdialogo||this.isPaused||(this.app.japassouluminolnabanheira&&this.japassoujorgequarto1&&this.app.japassoucofrequarto1?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(23):this.app.japassouluminolnabanheira&&this.japassoujorgequarto1?(this.app.japassoucofrequarto1=!0,this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(13)):this.app.japassouluminolnabanheira&&!this.app.japassoucofrequarto1?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(22):this.app.japassoucofrequarto1&&this.app.japassouluminolnabanheira&&this.japassoujorgequarto1?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(15):this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(21)),a.key!==pc.KEY_E||this.telamenu||!this.app.estanoJorgeGaragem1||this.estaemdialogo||this.isPaused||this.app.japassoudialogojorgegaragem||(this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(16),this.app.japassoudialogojorgegaragem=!0),a.key!==pc.KEY_E||this.telamenu||!this.app.estanoCarro||this.estaemdialogo||this.isPaused||(this.app.interagiucomcaixa?this.app.japassounoalicate?this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(29):(this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(27),this.app.japassounoalicate=!0):this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(26)),a.key===pc.KEY_E&&!this.telamenu&&this.app.estanaToolBox&&!this.estaemdialogo&&!this.isPaused&&!this.estaemalgumitem)if(this.app.japassoudialogojorgegaragem){o=this.entity.getLocalPosition();this.tampocamera.setLocalPosition(o.x,o.y+4,o.z),this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,setTimeout((()=>{this.app.root.findByName("tela_faca_tutorial").enabled=!0,this.app.root.findByName("colisorfaca").enabled=!1,this.app.root.findByName("colisorcadeado").enabled=!0;const a=this.app.root.findByName("CameraObj");a.script&&a.script.vignette&&(a.script.vignette.enabled=!0),a.script&&a.script.sepia&&(a.script.vignette.enabled=!0),a.enabled=!0,this.app.camera_objetos=!0,this.estaemalgumitem=!0}),2e3),setTimeout((()=>{this.app.tempobotaoWS=!0}),9e3)}else this.app.japassoudialogojorgegaragem||this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(24);if(a.key!==pc.KEY_F||this.telamenu||this.estaemdialogo||this.isPaused||(this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playLanterna(),this.lanteraligada=!this.lanteraligada,this.lanterninhadesliga.enabled=this.lanteraligada),a.key===pc.KEY_B&&!this.telamenu&&!this.estaemdialogo)if(this.isPaused){console.log("📖 Fechando o livro e aguardando..."),this.app.fire("descerLivro",!0),setTimeout((()=>{this.app.root.findByName("Inventario").enabled=!1,this.app.root.findByName("FawnUI").enabled=!1,this.app.root.findByName("Fita1").enabled=!1,this.app.root.findByName("Fita2").enabled=!1,this.app.root.findByName("InventarioTexto").enabled=!1,this.app.root.findByName("descricaotarefa").enabled=!1,this.app.root.findByName("InventarioTextobaixo").enabled=!1,this.app.root.findByName("quadro_descricao_lanterna").enabled=!1,this.app.root.findByName("quadro_descricao_faca").enabled=!1,this.app.root.findByName("quadro_descricao_luminol").enabled=!1}),100);var r=this;setTimeout((()=>{console.log("⏳ 2 segundos passaram, despausando jogo."),r.finalizarPause()}),2e3)}else this.iniciarPause(),setTimeout((()=>{this.app.root.findByName("Inventario").enabled=!0,this.app.root.findByName("FawnUI").enabled=!0,this.app.root.findByName("Fita1").enabled=!0,this.app.root.findByName("Fita2").enabled=!0,this.app.root.findByName("InventarioTexto").enabled=!0,this.app.root.findByName("descricaotarefa").enabled=!0,this.app.root.findByName("InventarioTextobaixo").enabled=!0,this.app.root.findByName("quadro_descricao_lanterna").enabled=!1,this.app.root.findByName("quadro_descricao_faca").enabled=!1,this.app.root.findByName("quadro_descricao_luminol").enabled=!1}),1e3)},MovimentarPlayer.prototype.iniciarPause=function(){this.somusicaestado=!0,console.log("🎵 Música estado: "+this.somusicaestado),this.isPaused=!0,this.ativarsaturacao=!0,this.valorsaturacao=-1,this.overlay&&(this.overlay.enabled=!0,this.controlesat=this.app.root.findByName("Camera2D"),this.musicamenu=this.app.root.findByName("MusicaMenu"),this.app.fire("subirLivro",!0),this.controlesat.script.hueSaturation.controlesaturacao=this.valorsaturacao,console.log("essa variavel ta certa? "+this.musicamenu.script.backgroundMusic),this.musicamenu.script.backgroundMusic.alterarVolume(this.somusicaestado),this.paredes.cima=!1,this.paredes.baixo=!1,this.paredes.direita=!1,this.paredes.esquerda=!1),this.app.timeScale=.2},MovimentarPlayer.prototype.finalizarPause=function(){this.somusicaestado=!1,this.isPaused=!1,this.ativarsaturacao=!1,this.valorsaturacao=0,this.musicamenu.script.backgroundMusic.alterarVolume(this.somusicaestado),this.overlay&&(this.overlay.enabled=!1,this.controlesat.script.hueSaturation.controlesaturacao=this.valorsaturacao,this.musicamenu.script.backgroundMusic.alterarVolume(this.somusicaestado)),this.app.timeScale=1},MovimentarPlayer.prototype.showPauseEffects=function(a){var e=this.app.root.findByName("PauseOverlay");e&&(e.enabled=a)},MovimentarPlayer.prototype.playIdleAnimation=function(){switch(this.ultimaDirecao){case"cima":this.playAnimation("idle_cima");break;case"esquerda":this.playAnimation("idle_esquerda");break;case"direita":this.playAnimation("idle_direita");break;default:this.playAnimation("idle_baixo")}},MovimentarPlayer.prototype.onKeyUp=function(a){if(a.key===pc.KEY_W){this.isWPressed=!1;var e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");e.enabled=!0,i.enabled=!0,t.enabled=!0}if(a.key===pc.KEY_A){this.isAPressed=!1;e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita");var s=this.app.root.findByName("paredecima");e.enabled=!0,i.enabled=!0,s.enabled=!0}if(a.key===pc.KEY_S){this.isSPressed=!1;s=this.app.root.findByName("paredecima"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");s.enabled=!0,i.enabled=!0,t.enabled=!0}if(a.key===pc.KEY_D){this.isDPressed=!1;s=this.app.root.findByName("paredecima"),e=this.app.root.findByName("paredebaixo"),t=this.app.root.findByName("paredeesquerda");s.enabled=!0,e.enabled=!0,t.enabled=!0}if(a.key===pc.KEY_UP){this.isWPressed=!1;e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");e.enabled=!0,i.enabled=!0,t.enabled=!0}if(a.key===pc.KEY_LEFT){this.isAPressed=!1;e=this.app.root.findByName("paredebaixo"),i=this.app.root.findByName("paredireita"),s=this.app.root.findByName("paredecima");e.enabled=!0,i.enabled=!0,s.enabled=!0}if(a.key===pc.KEY_DOWN){this.isSPressed=!1;s=this.app.root.findByName("paredecima"),i=this.app.root.findByName("paredireita"),t=this.app.root.findByName("paredeesquerda");s.enabled=!0,i.enabled=!0,t.enabled=!0}if(a.key===pc.KEY_RIGHT){this.isDPressed=!1;s=this.app.root.findByName("paredecima"),e=this.app.root.findByName("paredebaixo"),t=this.app.root.findByName("paredeesquerda");s.enabled=!0,e.enabled=!0,t.enabled=!0}},MovimentarPlayer.prototype.playAnimation=function(a){if(this.sprite)switch(a){case"andano_direita":this.sprite.play("andano_direita");break;case"andano_esquerda":this.sprite.play("andano_esquerda");break;case"andano_cima":this.sprite.play("andano_cima");break;case"andano_baixo":this.sprite.play("andano_baixo");break;case"idle_cima":this.sprite.play("idle_cima");break;case"idle_esquerda":this.sprite.play("idle_direita");break;case"idle_direita":this.sprite.play("idle_esquerda");break;case"idle_baixo":this.sprite.play("idle_baixo")}else console.error("Componente Sprite não encontrado!")};var VideoTexture2=pc.createScript("videoTexture2");VideoTexture2.attributes.add("videoAsset",{type:"asset"}),VideoTexture2.attributes.add("cameraEntity",{type:"entity"}),VideoTexture2.prototype.initialize=function(){var e=this.videoAsset;this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.movimentarCamera=this.cameraEntity.script.movimentarCamera;var t=e.getFileUrl();this.video=document.createElement("video"),this.video.src=t,this.video.loop=!0,this.video.muted=!0,this.video.playsInline=!0,this.video.crossOrigin="anonymous",this.video.play(),this.videoTexture=new pc.Texture(this.app.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,autoMipmap:!0});var i=this.entity.model.meshInstances[0].material;i.diffuseMap=this.videoTexture,i.update()},VideoTexture2.prototype.update=function(e){this.video.readyState>=this.video.HAVE_CURRENT_DATA&&this.videoTexture.setSource(this.video)};var ControleCamera=pc.createScript("controleCamera");ControleCamera.attributes.add("mainCamera",{type:"entity"}),ControleCamera.attributes.add("camera2d",{type:"entity"}),ControleCamera.attributes.add("cameratabu",{type:"entity"}),ControleCamera.attributes.add("cameradoeaster",{type:"entity"}),ControleCamera.attributes.add("cameraOBJ",{type:"entity"}),ControleCamera.attributes.add("adicionarcontrolepapelplay",{type:"entity"}),ControleCamera.prototype.initialize=function(){this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this),this.camera2d.enabled=!1,this.cameratabu.enabled=!1,this.cameraOBJ.enabled=!1,this.mudarcameraeaster=!1,this.nao=!1,this.teladebug=!0,this.app.root.findByName("tela_minigames").enabled=!1,this.app.root.findByName("tela_faca_tutorial").enabled=!1,this.passounoeaster=!1,this.app.once("selecionarPapel:pronto",(a=>{this.testedecamera=a})),this.cameraeastervar=this.app.root.findByName("CameraEasterEgg"),this.ativarcamera=!1,this.ativarcameratabu=!1,console.log(this.ativarcamera),this.ativarcamera?(this.mainCamera.enabled=!1,this.camera2d.enabled=!0):(this.mainCamera.enabled=!0,this.camera2d.enabled=!1)},ControleCamera.prototype.onKeyDown=function(a){a.key===pc.KEY_L&&this.nao&&(this.mainCamera.enabled=!1,this.camera2d.enabled=!1,this.cameratabu.enabled=!0,this.cameratabu.script.movimentarCameraTabu.estanotabu=!0)},ControleCamera.prototype.onKeyDown=function(a){a.key===pc.KEY_Y&&this.nao&&(this.teladebug?this.app.root.findByName("tela_minigames").enabled=!0:this.teladebug||(this.app.root.findByName("tela_minigames").enabled=!1),this.teladebug=!this.teladebug)},ControleCamera.prototype.update=function(a){this.ativarcameratabu&&(console.log("mudando para camera Tabu"),this.cameratabu.enabled=!0,this.camera2d.enabled=!1,this.ativarcameratabu=!1),!0===this.testedecamera.mudarcameraaqui&&(this.toggleCamera(),this.testedecamera.mudarcameraaqui=!1),!0===this.mudarcameraeaster&&(this.cameraeasterativar(),this.mudarcameraeaster=!1)},ControleCamera.prototype.cameraeasterativar=function(){this.passounoeaster?(this.cameraeastervar.enabled=!1,this.passounoeaster=!1):(this.cameraeastervar.enabled=!0,this.passounoeaster=!0)},ControleCamera.prototype.toggleCamera=function(){this.mainCamera.enabled?(this.mainCamera.enabled=!1,this.camera2d.enabled=!0):(this.camera2d.enabled=!1,this.mainCamera.enabled=!0)};var HoverManager=pc.createScript("hoverManager");HoverManager.prototype.initialize=function(){this.lastHovered=null,this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this)},HoverManager.prototype.onMouseMove=function(e){var r=this.app.root.findByName("Camera"),a=r.camera.screenToWorld(e.x,e.y,r.camera.nearClip),s=r.camera.screenToWorld(e.x,e.y,r.camera.farClip),t=this.app.systems.rigidbody.raycastFirst(a,s),o=t?t.entity:null;this.lastHovered&&this.lastHovered!==o&&this.lastHovered.script&&this.lastHovered.script.selecionarPapel&&this.lastHovered.script.selecionarPapel.onMouseLeave(),o&&o.script&&o.script.selecionarPapel&&o.script.selecionarPapel.onMouseEnter(),this.lastHovered=o};var MovimentarCamera2d=pc.createScript("movimentarCamera2d");MovimentarCamera2d.attributes.add("player",{type:"entity"}),MovimentarCamera2d.prototype.initialize=function(){this.posicaoplayer=this.player.getLocalPosition()},MovimentarCamera2d.prototype.update=function(t){let a=this.player.getLocalPosition();this.entity.setLocalPosition(a.x,a.y+5,a.z)};var SeInteragir=pc.createScript("seInteragir");SeInteragir.attributes.add("botaoInteragir",{type:"entity"}),SeInteragir.attributes.add("player",{type:"entity"}),SeInteragir.attributes.add("tampocamera",{type:"entity"}),SeInteragir.attributes.add("selecionarpapelplay",{type:"entity"}),SeInteragir.prototype.initialize=function(){this.botaoInt=this.botaoInteragir,this.botaoIntDebugBaralho=this.app.root.findByName("Interagirdebug"),this.botatoIntInteragirpanfletos=this.app.root.findByName("Interagirpanfletos"),this.botaoIntInteragirQuarto=this.app.root.findByName("Interagirquarto"),this.botaoIntInteragirBanheiro=this.app.root.findByName("Interagirbanheiro"),this.botaoIntInteragirGaragem=this.app.root.findByName("Interagirgaragem"),this.botaoIntInteragirFaca=this.app.root.findByName("Interagirfaca"),this.botaoIntInteragirBanheira=this.app.root.findByName("Interagirbanheira"),this.botaoIntInteragirJorgeQuarto1=this.app.root.findByName("InteragirJorgeQuarto1"),this.botaoIntInteragirCofreQuarto=this.app.root.findByName("Interagircofrequarto"),this.botaoIntInteragirJorgeGaragem1=this.app.root.findByName("InteragirJorgeGaragem1"),this.botaoIntInteragirToolbox=this.app.root.findByName("Interagirtoolbox"),this.botaoIntInteragirCarroGaragem=this.app.root.findByName("Interagircarro"),this.ativoubotao=!1,this.colidiuComPlayer=!1,this.variaveldobalacobaco=!0,this.passounaporta=!1,this.passounaportamesmo=!1,this.pikadesalmao=!1,this.timer=0,this.posicaoplayer=this.player.getLocalPosition(),void 0===this.app.estanodegubcarta&&(this.app.estanodegubcarta=!1),void 0===this.app.estanopanfleto&&(this.app.estanopanfleto=!1),void 0===this.app.estanoquarto&&(this.app.estanoquarto=!1),void 0===this.app.estanobanheiro&&(this.app.estanobanheiro=!1),void 0===this.app.estanagaragem&&(this.app.estanagaragem=!1),void 0===this.app.estanaFaca&&(this.app.estanaFaca=!1),void 0===this.app.estanaBanheira&&(this.app.estanaBanheira=!1),void 0===this.app.estanoJorgeQuarto1&&(this.app.estanoJorgeQuarto1=!1),void 0===this.app.estanoCofreQuarto&&(this.app.estanoCofreQuarto=!1),void 0===this.app.estanoJorgeGaragem1&&(this.app.estanoJorgeGaragem1=!1),void 0===this.app.estanaToolBox&&(this.app.estanaToolBox=!1),void 0===this.app.estanoCarro&&(this.app.estanoCarro=!1),console.log("Initialize chamado!"),console.log("BOTAO DE INTERAGIR "+this.botaoInt),this.botaoInt?(this.botaoInt.enabled=!1,this.botaoIntDebugBaralho.enabled=!1,this.botatoIntInteragirpanfletos.enabled=!1):console.error("botaoInteragir não foi definido no Editor."),console.log("BOTAO DE INTERAGIR ENABLED OU DISABLE? "+this.botaoInt.enabled),this.entity.collision?(console.log("ESSA ENTIDADE TEM COLISAO KRL? "+this.entity.collision),this.entity.collision.on("collisionend",this.onCollisionEnd,this),this.entity.collision.on("collisionstart",this.onCollisionStart,this)):console.error("A entidade precisa ter um componente Collision!")},SeInteragir.prototype.onCollisionStart=function(o){console.log("Colisão detectada com:",o.other?o.other.name:"Desconhecido"),o.other&&"colisao_player"===o.other.name&&"Casinha"===this.entity.name&&(this.botaoInt=this.botaoInteragir,this.colidiuComPlayer=!0,this.app.estanopanfleto=!1,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"Teste_Trigger"===this.entity.name&&(this.colidiuComPlayer=!0,this.app.estanopanfleto=!1,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"DebugBaralho"===this.entity.name&&(this.botaoInt=this.botaoIntDebugBaralho,this.colidiuComPlayer=!0,this.app.estanodegubcarta=!0,this.app.estanopanfleto=!1,console.log("TA PRINTANDO PORRA CARALHO CUSETA CU"),console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"panfletosweverson"===this.entity.name&&(this.botaoInt=this.botatoIntInteragirpanfletos,this.colidiuComPlayer=!0,this.app.estanopanfleto=!0,console.log("TA PRINTANDO PORRA CARALHO CUSETA CU"),console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"porta_quarto"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirQuarto,this.colidiuComPlayer=!0,this.app.estanoquarto=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"porta_banheiro"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirBanheiro,this.colidiuComPlayer=!0,this.app.estanobanheiro=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"porta_garagem"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirGaragem,this.colidiuComPlayer=!0,this.app.estanagaragem=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"facacozinha_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirFaca,this.colidiuComPlayer=!0,this.app.estanaFaca=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"banheira_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirBanheira,this.colidiuComPlayer=!0,this.app.estanaBanheira=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"jorgequarto_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirJorgeQuarto1,this.colidiuComPlayer=!0,this.app.estanoJorgeQuarto1=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"cofrequarto_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirCofreQuarto,this.colidiuComPlayer=!0,this.app.estanoCofreQuarto=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"jorgegaragem_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirJorgeGaragem1,this.colidiuComPlayer=!0,this.app.estanoJorgeGaragem1=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"toolbox_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirToolbox,this.colidiuComPlayer=!0,this.app.estanaToolBox=!0,console.log("Player entrou na colisão, botão ativado!")),o.other&&"colisao_player"===o.other.name&&"carrogaragem_colisao"===this.entity.name&&(this.botaoInt=this.botaoIntInteragirCarroGaragem,this.colidiuComPlayer=!0,this.app.estanoCarro=!0,console.log("Player entrou na colisão, botão ativado!"))},SeInteragir.prototype.onCollisionEnd=function(o){console.log("Colisão terminada com:",o.other?o.other.name:"Desconhecido"),this.colidiuComPlayer&&(this.colidiuComPlayer=!1,console.log("Player saiu da colisão, botão desativado!"),this.botaoInt&&(this.botaoInt.enabled=!1,console.log("Botão desativado!")),"DebugBaralho"===this.entity.name&&(this.app.estanodegubcarta=!1,console.log("estanopanfleto voltou para false")))},SeInteragir.prototype.update=function(o){if(this.posicaoplayer=this.player.getLocalPosition(),this.colidiuComPlayer&&!this.passounaporta&&this.entity.tags.has("Porta")){this.passounaporta=!0,this.passounaportamesmo=!0;var a=this.player.getLocalPosition();this.selecionarpapelplay.script.selecionarPapel.triggerdecamera=!0,this.tampocamera.setLocalPosition(a.x,a.y+4,a.z),console.log("Player passou na porta!"),console.log("Player PASSOU NA PORTA TRUE "+this.passounaporta),this.chovechuva=this.app.root.findByName("ChuvinhaBoa"),setTimeout((()=>{this.chovechuva.enabled=!0,this.player.setLocalPosition(-108.8,.863,-.604)}),2e3)}else!this.colidiuComPlayer&&this.passounaporta&&this.entity.tags.has("Porta")&&(setTimeout((()=>{this.passounaporta=!1,this.passounaportamesmo=!1}),3e3),console.log("Player saiu da porta!"));this.colidiuComPlayer&&!this.ativoubotao&&this.entity.tags.has("Interagir")&&(this.botaoInt.enabled=!0,this.ativoubotao=!0,console.log("Player colidiu, botão ativado!")),!this.colidiuComPlayer&&this.ativoubotao&&this.entity.tags.has("Interagir")&&(this.botaoInt.enabled=!1,this.ativoubotao=!1,console.log("Player não colidiu, botão desativado!")),!this.colidiuComPlayer&&this.app.estanopanfleto&&"panfletosweverson"===this.entity.name&&(this.app.estanopanfleto=!1,console.log("Player parou de colidir com panfletosweverson!")),!this.colidiuComPlayer&&this.app.estanoquarto&&"porta_quarto"===this.entity.name&&(this.app.estanoquarto=!1,console.log("Player parou de colidir com Interagirquarto!")),!this.colidiuComPlayer&&this.app.estanobanheiro&&"porta_banheiro"===this.entity.name&&(this.app.estanobanheiro=!1,console.log("Player parou de colidir com Interagirbanheiro!")),!this.colidiuComPlayer&&this.app.estanagaragem&&"porta_garagem"===this.entity.name&&(this.app.estanagaragem=!1,console.log("Player parou de colidir com Interagirgaragem!")),!this.colidiuComPlayer&&this.app.estanaFaca&&"facacozinha_colisao"===this.entity.name&&(this.app.estanaFaca=!1,console.log("Player parou de colidir com InteragirFaca!")),!this.colidiuComPlayer&&this.app.estanaBanheira&&"banheira_colisao"===this.entity.name&&(this.app.estanaBanheira=!1,console.log("Player parou de colidir com banheira_colisao!")),!this.colidiuComPlayer&&this.app.estanoJorgeQuarto1&&"jorgequarto_colisao"===this.entity.name&&(this.app.estanoJorgeQuarto1=!1,console.log("Player parou de colidir com estanoJorgeQuarto1!")),!this.colidiuComPlayer&&this.app.estanoCofreQuarto&&"cofrequarto_colisao"===this.entity.name&&(this.app.estanoCofreQuarto=!1,console.log("Player parou de colidir com estanoCofreQuarto!")),!this.colidiuComPlayer&&this.app.estanoJorgeGaragem1&&"jorgegaragem_colisao"===this.entity.name&&(this.app.estanoJorgeGaragem1=!1,console.log("Player parou de colidir com estanoJorgeGaragem1!")),!this.colidiuComPlayer&&this.app.estanaToolBox&&"toolbox_colisao"===this.entity.name&&(this.app.estanaToolBox=!1,console.log("Player parou de colidir com estanaToolBox!")),!this.colidiuComPlayer&&this.app.estanoCarro&&"carrogaragem_colisao"===this.entity.name&&(this.app.estanoCarro=!1,console.log("Player parou de colidir com estanoCarro!"))};var RodarCapsula=pc.createScript("rodarCapsula");RodarCapsula.prototype.initialize=function(){this.girando=!0},RodarCapsula.prototype.update=function(t){var a=this.entity.getLocalRotation(),o=20*t,i=new pc.Quat;i.setFromEulerAngles(0,o,0),a.mul(i),this.entity.setLocalRotation(a)};var SAMPLE_COUNT=15;function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,o,r,s){e[0]=computeGaussian(0,s),t[0]=0,t[1]=0;var i,a,l=e[0];for(i=0,a=Math.floor(SAMPLE_COUNT/2);i<a;i++){var u=computeGaussian(i+1,s);e[2*i]=u,e[2*i+1]=u,l+=2*u;var h=2*i+1.5;t[4*i]=o*h,t[4*i+1]=r*h,t[4*i+2]=-o*h,t[4*i+3]=-r*h}for(i=0,a=e.length;i<a;i++)e[i]/=l}function BloomEffect(e){pc.PostEffect.call(this,e);var t={aPosition:pc.SEMANTIC_POSITION},o=["varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=["#define SAMPLE_COUNT "+SAMPLE_COUNT,"","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets["+SAMPLE_COUNT+"];","uniform float uBlurWeights["+SAMPLE_COUNT+"];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),s=["varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=pc.createShaderFromCode(e,pc.PostEffect.quadVertexShader,o,"BloomExtractShader",t),this.blurShader=pc.createShaderFromCode(e,pc.PostEffect.quadVertexShader,r,"BloomBlurShader",t),this.combineShader=pc.createShaderFromCode(e,pc.PostEffect.quadVertexShader,s,"BloomCombineShader",t),this.targets=[],this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(SAMPLE_COUNT),this.sampleOffsets=new Float32Array(2*SAMPLE_COUNT)}BloomEffect.prototype=Object.create(pc.PostEffect.prototype),BloomEffect.prototype.constructor=BloomEffect,BloomEffect.prototype._destroy=function(){var e;if(this.targets)for(e=0;e<this.targets.length;e++)this.targets[e].destroyTextureBuffers(),this.targets[e].destroy();this.targets.length=0},BloomEffect.prototype._resize=function(e){var t,o=e.colorBuffer.width,r=e.colorBuffer.height;if(o!==this.width||r!==this.height)for(this.width=o,this.height=r,this._destroy(),t=0;t<2;t++){var s=new pc.Texture(this.device,{name:"Bloom Texture"+t,format:pc.PIXELFORMAT_RGBA8,width:o>>1,height:r>>1,mipmaps:!1});s.minFilter=pc.FILTER_LINEAR,s.magFilter=pc.FILTER_LINEAR,s.addressU=pc.ADDRESS_CLAMP_TO_EDGE,s.addressV=pc.ADDRESS_CLAMP_TO_EDGE,s.name="pe-bloom-"+t;var i=new pc.RenderTarget({name:"Bloom Render Target "+t,colorBuffer:s,depth:!1});this.targets.push(i)}},Object.assign(BloomEffect.prototype,{render:function(e,t,o){this._resize(e);var r=this.device.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),this.drawQuad(this.targets[0],this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),this.drawQuad(this.targets[1],this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),this.drawQuad(this.targets[0],this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),this.drawQuad(t,this.combineShader,o)}});var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect),this.effect._destroy()}))};function VignetteEffect(e){pc.PostEffect.call(this,e);var t=["uniform sampler2D uColorBuffer;","uniform float uDarkness;","uniform float uOffset;","","varying vec2 vUv0;","","void main() {","    vec4 texel = texture2D(uColorBuffer, vUv0);","    vec2 uv = (vUv0 - vec2(0.5)) * vec2(uOffset);","    gl_FragColor = vec4(mix(texel.rgb, vec3(1.0 - uDarkness), dot(uv, uv)), texel.a);","}"].join("\n");this.vignetteShader=pc.createShaderFromCode(e,pc.PostEffect.quadVertexShader,t,"VignetteShader",{aPosition:pc.SEMANTIC_POSITION}),this.offset=1,this.darkness=1}VignetteEffect.prototype=Object.create(pc.PostEffect.prototype),VignetteEffect.prototype.constructor=VignetteEffect,Object.assign(VignetteEffect.prototype,{render:function(e,t,f){var s=this.device.scope;s.resolve("uColorBuffer").setValue(e.colorBuffer),s.resolve("uOffset").setValue(this.offset),s.resolve("uDarkness").setValue(this.darkness),this.drawQuad(t,this.vignetteShader,f)}});var Vignette=pc.createScript("vignette");Vignette.attributes.add("offset",{type:"number",default:1,min:0,title:"Offset"}),Vignette.attributes.add("darkness",{type:"number",default:1,title:"Darkness"}),Vignette.prototype.initialize=function(){this.effect=new VignetteEffect(this.app.graphicsDevice),this.effect.offset=this.offset,this.effect.darkness=this.darkness,this.on("attr",(function(e,t){this.effect[e]=t}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};function SepiaEffect(t){pc.PostEffect.call(this,t);var e=["uniform float uAmount;","uniform sampler2D uColorBuffer;","","varying vec2 vUv0;","","void main() {","    vec4 color = texture2D(uColorBuffer, vUv0);","    vec3 c = color.rgb;","","    color.r = dot(c, vec3(1.0 - 0.607 * uAmount, 0.769 * uAmount, 0.189 * uAmount));","    color.g = dot(c, vec3(0.349 * uAmount, 1.0 - 0.314 * uAmount, 0.168 * uAmount));","    color.b = dot(c, vec3(0.272 * uAmount, 0.534 * uAmount, 1.0 - 0.869 * uAmount));","","    gl_FragColor = vec4(min(vec3(1.0), color.rgb), color.a);","}"].join("\n");this.shader=pc.createShaderFromCode(t,pc.PostEffect.quadVertexShader,e,"SepiaShader",{aPosition:pc.SEMANTIC_POSITION}),this.amount=1}SepiaEffect.prototype=Object.create(pc.PostEffect.prototype),SepiaEffect.prototype.constructor=SepiaEffect,Object.assign(SepiaEffect.prototype,{render:function(t,e,o){var c=this.device.scope;c.resolve("uAmount").setValue(this.amount),c.resolve("uColorBuffer").setValue(t.colorBuffer),this.drawQuad(e,this.shader,o)}});var Sepia=pc.createScript("sepia");Sepia.attributes.add("amount",{type:"number",default:1,min:0,max:1,title:"Amount"}),Sepia.prototype.initialize=function(){this.effect=new SepiaEffect(this.app.graphicsDevice),this.effect.amount=this.amount,this.on("attr:amount",(function(t){this.effect.amount=t}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};var DialogueSystem=pc.createScript("dialogueSystem");DialogueSystem.prototype.dialoguesData={1:[{character:"Fawn",text:"Mais uma cena do crime, mais uma vitima. O relatorio dizia que foi feio... Vamos ver o que o Jorge encontrou"}],2:[{character:"Policial Alfred",text:"Ja fizemos a vistoria na casa..."},{character:"Policial Alfred",text:"Jorge ja esta la dentro observando e aguardando tua chegada."},{character:"Fawn",text:"Ok, Obrigado!"}],3:[{character:"Fawn",text:"Oque sao esses panfletos no chao!?!"},{character:"Fawn",text:"Parece que estao fazendo propaganda de alguns jogos"},{character:"Fawn",text:"Weverson...quem eh esse?"}],4:[{character:"Jorge",text:"Você sabe o que tem que fazer."},{character:"Fawn",text:"Encontrar pistas, certo?"},{character:"Jorge",text:"Exato! Vai lá, cada gota de sangue é um detalhe importante."},{character:"Jorge",text:"Não vacila. Pega as luvas, os sacos plásticos e começa a trabalhar..."},{character:"Jorge",text:"E não me venha com frescura, qualquer erro e o chefe te manda embora. Se precisar de ajuda, me chama..."},{character:"Jorge",text:"Vou te mostrar o que você deixou passar, mas não fica pegando coisa à toa, ou vai se dar mal..."},{character:"Jorge",text:"E nem pensa em contaminar as pistas, se não vai ter problema com tudo."}],5:[{character:"Jorge",text:"(voz baixa) Ei guri, vem aqui!"}],6:[{character:"Fawn",text:"Para que serve isso?"},{character:"Jorge",text:"Luminol, seu imbecil! Serve pra achar o sangue onde foi limpado."},{character:"Fawn",text:"Ah, entendi! Quando o ferro reage com o sangue, brilha azul-fluorescente, né?"},{character:"Jorge",text:"...NOSSA, você leu o manual Sherlock, acertou!"}],7:[{character:"Fawn",text:"Talvez eu devesse conversar com Jorge Antes de tocar nas pistas..."}],8:[{character:"Fawn",text:"Uma banheira e um chuveiro? essa vítima gostava de estar limpa..."}],9:[{character:"Fawn",text:"O assassino parece ter se limpado na banheira!..."},{character:"Fawn",text:"Preciso avisar isso ao Jorge."}],10:[{character:"Fawn",text:"Já descobri que o assassino se lavou aqui, preciso falar com Jorge."}],11:[{character:"Fawn",text:"Jorge encontrei algumas pistas usando luminol no banheiro, achei marcas de sangue, possivelmente do assassino"},{character:"Jorge",text:"Legal..."},{character:"Fawn",text:"Também na cozinha encontrei uma faca acredito que tenha sido o objeto que foi usado para perfurar a vítima"},{character:"Jorge",text:"Pelo tamanho do corte e pela abertura na cabeça, me parece que foi algo pontiagudo cumprido, não uma faca guri."},{character:"Fawn",text:"Ah..."},{character:"Fawn",text:"..."}],12:[{character:"Jorge",text:"Tem alguma ideia do que rolou aqui?"},{character:"Fawn",text:"Parece que o cara tava procurando alguma coisa... Algo que valesse a pena..."},{character:"Jorge",text:"Olha só, até que você não é tão burro quanto parece!"}],13:[{character:"Fawn",text:"Então, o assassino matou pra roubar, certo?"},{character:"Jorge",text:"Já tinha suspeitado disso... mas ainda falta encontrar a arma do crime..."},{character:"Jorge",text:"Vamos continuar a busca, guri!"}],14:[{character:"Jorge",text:"Da uma olhada nesse cofre guri!"}],15:[{character:"Jorge",text:"Por aqui acredito que já exploramos tudo..."}],16:[{character:"Jorge",text:"Ele tinha um belo carro..."},{character:"Fawn",text:"Viemos só porque você gosta de carro velho?"},{character:"Jorge",text:"..."},{character:"Jorge",text:"da uma olhada naquela caixa de ferramentas..."},{character:"Jorge",text:"...Foca no trabalho!"}],17:[{character:"Fawn",text:"Jorge, acho que essa chave de fenda possa ter sido a arma do crime!"},{character:"Jorge",text:"...O que está esperando? Bora, testa o luminol!"}],18:[{character:"Fawn",text:"Caramba!"},{character:"Fawn",text:"A chave de fenda ta brilhando por completo, com certeza essa foi arma usada na vítima!"}],19:[{character:"Jorge",text:"Boa, guri!"}],20:[{character:"Jorge",text:"Boa, guri! (Tapa nas costas do Fawn)"},{character:"Fawn",text:"Ain..."},{character:"Jorge",text:"Ta me estranhando p4r$?@!"},{character:"Fawn",text:"Me respeita cara kkkk, depois daqui vamos curtir uma 51?"},{character:"Jorge",text:"Agora sim ta falando minha língua! Mas antes...leva essa chave de fenda para o departamento fazer a análise..."},{character:"Jorge",text:"E volta com o resultado, depois que tudo isso tiver concluído, aí quem sabe eu não te pago uma bebida..."},{character:"Fawn",text:"Fechou meu patrão!"}],21:[{character:"Fawn",text:"Cofre bonito."}],22:[{character:"Fawn",text:"Deveria falar com o Jorge antes de mexer em qualquer coisa"}],23:[{character:"Fawn",text:"(O cofre parecia ter bastante dinheiro)"},{character:"Fawn",text:"(Mas o assassino não pegou nada...porque!?)"}],24:[{character:"Fawn",text:"Uma caixa de ferramentas...tem um cadeado, não consigo abrir..."}],25:[{character:"Fawn",text:"Esse cadeado ta me dando nos nervos, será que não tem algo por aqui pra arrombar essa caixa de ferramentas?"},{character:"Fawn",text:"Ei..olha só, achei uma chave de carro..."}],26:[{character:"Fawn",text:"A porta ta trancada..."}],27:[{character:"Fawn",text:"Espera, talvez eu devesse usar a chave do carro..."},{character:"Fawn",text:"Bingo, um alicate no banco."}],28:[{character:"Fawn",text:"É agora que quebro essa droga..."}],29:[{character:"Fawn",text:"Não parece ter nada de suspeito dentro do carro..."}]},DialogueSystem.prototype.initialize=function(){this.index=0,this.dialogues=[],this.dialogonum=null,this.isTyping=!1,this.currentText="",this.charIndex=0,this.lastClickTime=0,this.typeInterval=null,this.dialogueText=this.app.root.findByName("DialogueText"),this.nextButton=this.app.root.findByName("NextButton"),this.headContainer=this.app.root.findByName("cabesa_pessoa"),this.heads={Fawn:this.headContainer.findByName("cabesa_fawn"),Jorge:this.headContainer.findByName("cabesa_jorge"),"Ninguém":this.headContainer.findByName("cabesa_ninguem")},this.entity.enabled=!1,this.nextButton.element.on("click",this.handleNextClick,this),this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this)},DialogueSystem.prototype.onKeyDown=function(a){!this.entity.enabled||a.key!==pc.KEY_ENTER&&a.key!==pc.KEY_SPACE||this.handleNextClick()},DialogueSystem.prototype.setDialogue=function(a){this.dialoguesData[a]?(this.dialogues=this.dialoguesData[a],this.dialogonum=a,this.index=0,this.entity.enabled=!0,this.startTyping()):console.warn("Diálogo número "+a+" não encontrado.")},DialogueSystem.prototype.startTyping=function(){this.typeInterval&&clearInterval(this.typeInterval),this.isTyping=!0,this.ficaparadoporra=this.app.root.findByName("Player"),this.ficaparadoporra.script.movimentarPlayer.estaemdialogo=!0,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.iniciarSomDialogo(),this.charIndex=0;const a=this.dialogues[this.index];this.currentText=a.character+" - "+a.text,this.dialogueText.element.text="",this.updateHeadSprite(a.character),this.typeInterval=setInterval((()=>{this.charIndex<this.currentText.length?(this.dialogueText.element.text=this.currentText.substring(0,this.charIndex+1),this.charIndex++):(clearInterval(this.typeInterval),this.isTyping=!1,this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.pararSomDialogo())}),30)},DialogueSystem.prototype.updateHeadSprite=function(a){for(let a in this.heads)this.heads[a].enabled=!1;this.heads[a]?this.heads[a].enabled=!0:this.heads["Ninguém"].enabled=!0},DialogueSystem.prototype.handleNextClick=function(){const a=Date.now();a-this.lastClickTime<500||(this.lastClickTime=a,this.isTyping?(clearInterval(this.typeInterval),this.dialogueText.element.text=this.currentText,this.isTyping=!1):this.nextDialogue())},DialogueSystem.prototype.nextDialogue=function(){if(this.index++,this.index<this.dialogues.length)this.startTyping();else{this.app.root.findByName("Player");this.ficaparadoporra.script.movimentarPlayer.estaemdialogo=!1,this.entity.enabled=!1;for(let a in this.heads)this.heads[a].enabled=!1;5===this.dialogonum&&(console.log("Fim do diálogo 5! Executando ações especiais..."),this.app.root.findByName("notificacoes").script.animacaonoti.iniciarAnimApertarB()),6===this.dialogonum&&(console.log("Fim do diálogo 6! Executando ações especiais..."),this.app.root.findByName("Jorge2").enabled=!1,this.app.root.findByName("Jorge1").enabled=!0,this.app.itemluminol=!0,this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),this.app.root.findByName("LuminolDOKRL").enabled=!0),11===this.dialogonum&&(this.app.root.findByName("Jorge3sprite").sprite.flipX=!1,this.ficaparadoporra.script.movimentarPlayer.estaemdialogo=!0,setTimeout((()=>{this.app.root.findByName("Jorge3sprite").sprite.flipX=!0,this.setDialogue(12)}),3e3)),12===this.dialogonum&&(this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),this.app.root.findByName("InteragirJorgeQuarto1").enabled=!0),13===this.dialogonum&&(this.app.jaexplorouquartoJorgeQuarto1=!0,this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa()),16===this.dialogonum&&this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),17===this.dialogonum&&(this.ficaparadoporra.script.movimentarPlayer.estaemdialogo=!0,setTimeout((()=>{this.app.root.findByName("EfeitosdoRatinho").script.defeitosSonoros.playAuraLight(),this.app.root.findByName("caixa_luz").enabled=!0}),2e3),setTimeout((()=>{this.setDialogue(18),this.app.root.findByName("Camera2D").orthoHeight=1.75}),3e3)),18===this.dialogonum&&(this.ficaparadoporra.script.movimentarPlayer.estaemdialogo=!0,setTimeout((()=>{this.setDialogue(20)}),700)),20===this.dialogonum&&(setTimeout((()=>{this.app.telafinalvariavelcamera=!0}),700),setTimeout((()=>{const a=this.app.root.findByName("Camera2D");a.script&&a.script.vignette&&(a.script.vignette.enabled=!1),a.script&&a.script.sepia&&(a.script.vignette.enabled=!1),a.enabled=!1,this.app.root.findByName("CameraFinalPrologo").enabled=!0}),2700))}},DialogueSystem.prototype.destroy=function(){this.typeInterval&&clearInterval(this.typeInterval),this.app.keyboard.off(pc.EVENT_KEYDOWN,this.onKeyDown,this)};function HueSaturationEffect(t){pc.PostEffect.call(this,t);var e=["uniform sampler2D uColorBuffer;","uniform float uHue;","uniform float uSaturation;","","varying vec2 vUv0;","","void main() {","    gl_FragColor = texture2D( uColorBuffer, vUv0 );","","    float angle = uHue * 3.14159265;","    float s = sin(angle), c = cos(angle);","    vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","    float len = length(gl_FragColor.rgb);","    gl_FragColor.rgb = vec3(","        dot(gl_FragColor.rgb, weights.xyz),","        dot(gl_FragColor.rgb, weights.zxy),","        dot(gl_FragColor.rgb, weights.yzx)","    );","","    float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","    if (uSaturation > 0.0) {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - uSaturation));","    } else {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-uSaturation);","    }","}"].join("\n");this.shader=pc.createShaderFromCode(t,pc.PostEffect.quadVertexShader,e,"HueSaturationShader",{aPosition:pc.SEMANTIC_POSITION}),this.hue=0,this.saturation=0}HueSaturationEffect.prototype=Object.create(pc.PostEffect.prototype),HueSaturationEffect.prototype.constructor=HueSaturationEffect,Object.assign(HueSaturationEffect.prototype,{render:function(t,e,a){var r=this.device.scope;r.resolve("uHue").setValue(this.hue),r.resolve("uSaturation").setValue(this.saturation),r.resolve("uColorBuffer").setValue(t.colorBuffer),this.drawQuad(e,this.shader,a)}});var HueSaturation=pc.createScript("hueSaturation");HueSaturation.attributes.add("hue",{type:"number",default:0,min:-1,max:1,title:"Hue"}),HueSaturation.attributes.add("saturation",{type:"number",default:0,min:-1,max:1,title:"Saturation"}),HueSaturation.prototype.initialize=function(){this.effect=new HueSaturationEffect(this.app.graphicsDevice),this.effect.hue=this.hue,this.controlesaturacao=0,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))},HueSaturation.prototype.update=function(){this.effect.saturation=this.controlesaturacao};var Lanterna=pc.createScript("lanterna");Lanterna.attributes.add("player",{type:"entity"}),Lanterna.prototype.initialize=function(){this.camera=this.app.root.findByName("Camera2D"),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.smoothFactor=.1,this.currentAngle=0},Lanterna.prototype.onMouseMove=function(t){if(this.camera&&this.player){var e=this.player.getPosition(),n=new pc.Vec2(t.x,t.y),r=this.camera.camera.screenToWorld(n.x,n.y,e.y),a=new pc.Vec3(r.x-e.x,0,r.z-e.z),i=Math.atan2(-a.x,a.z)*pc.math.RAD_TO_DEG,s=i-this.currentAngle;s>180?this.currentAngle+=360:s<-180&&(this.currentAngle-=360),this.currentAngle=pc.math.lerp(this.currentAngle,i,this.smoothFactor),this.entity.setLocalEulerAngles(0,0,this.currentAngle)}};var Diagolotrigi=pc.createScript("diagolotrigi");Diagolotrigi.prototype.initialize=function(){this.entity.collision.on("collisionend",this.onCollisionEnd,this),this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.pintobiologico=!0,this.pintobiologico2=!0,this.pintobiologico3=!0,this.pintobiologico4=!0,this.pintobiologico5=!0},Diagolotrigi.prototype.update=function(o){this.app.conversoucomjorge1=this.pintobiologico4},Diagolotrigi.prototype.onCollisionStart=function(o){var i,t;(console.log("Colisão detectada com:",o.other?o.other.name:"Desconhecido"),o.other&&"colisao_player"===o.other.name&&"dialogoporta"===this.entity.name)&&((i=this.app.root.findByName("DialogueBox"))?(console.log("Encontrou DialogueBox!"),(t=i.script.dialogueSystem)&&this.pintobiologico?(console.log("Chamando startDialogue..."),t.setDialogue(1),this.pintobiologico=!1):console.log("Já interagiu 1 vez filhão, calma lá!")):console.error("DialogueBox não encontrado!"));o.other&&"colisao_player"===o.other.name&&"Policial1"===this.entity.name&&((i=this.app.root.findByName("DialogueBox"))&&(console.log("Encontrou DialogueBox!"),(t=i.script.dialogueSystem)&&this.pintobiologico2&&(console.log("Chamando startDialogue..."),t.setDialogue(2),this.pintobiologico2=!1)));o.other&&"colisao_player"===o.other.name&&"panfletosweverson"===this.entity.name&&((i=this.app.root.findByName("DialogueBox"))&&(console.log("Encontrou DialogueBox!"),(t=i.script.dialogueSystem)&&this.pintobiologico3&&(console.log("Chamando startDialogue..."),t.setDialogue(3),this.pintobiologico3=!1)));o.other&&"colisao_player"===o.other.name&&"Jorge1"===this.entity.name&&((i=this.app.root.findByName("DialogueBox"))&&(console.log("Encontrou DialogueBox!"),(t=i.script.dialogueSystem)&&this.pintobiologico4&&(console.log("Chamando startDialogue..."),t.setDialogue(4),this.pintobiologico4=!1,this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa())));o.other&&"colisao_player"===o.other.name&&"Jorge2"===this.entity.name&&((i=this.app.root.findByName("DialogueBox"))&&(console.log("Encontrou DialogueBox!"),(t=i.script.dialogueSystem)&&this.pintobiologico5&&(console.log("Chamando startDialogue..."),t.setDialogue(6),this.pintobiologico5=!1)))},Diagolotrigi.prototype.onCollisionEnd=function(o){console.log("Colisão terminada com:",o.other?o.other.name:"Desconhecido")};var Tachovendo=pc.createScript("tachovendo");Tachovendo.prototype.initialize=function(){this.passouaquicalabreso=!0,this.passouja=!1;var a=this.entity.sound.slots.somdechuvaaudio;a.loop=!0,a.volume=0,a.stop(),this.musicamenu=this.app.root.findByName("MusicaMenu")},Tachovendo.prototype.update=function(a){this.soltaosomnacaixaDJ=this.musicamenu.script.backgroundMusic.choveminhachuva;var o=this.entity.sound.slots.somdechuvaaudio;!this.soltaosomnacaixaDJ&&this.passouaquicalabreso&&(this.passouaquicalabreso=!this.passouaquicalabreso,o.loop=!0,o.play()),this.soltaosomnacaixaDJ&&!this.passouja&&this.fadeInChuva()},Tachovendo.prototype.fadeInChuva=function(a){var o=this.entity.sound.slots.somdechuvaaudio;o.volume<.2?o.volume+=.001:(o.volume=.2,this.passouja=!0)};var Animacaonoti=pc.createScript("animacaonoti");Animacaonoti.attributes.add("notificacao",{type:"entity"}),Animacaonoti.prototype.initialize=function(){this.ativarnoti=!1,this.sairdoloop=!1,this.exefadein=!1,this.exefadeout=!1,this.semova=this.app.root.findByName("semovaWASD"),this.lanternanoti=this.app.root.findByName("AperteLanterna"),this.inventnoti=this.app.root.findByName("AperteBparaInv"),this.notificacao=this.app.root.findByName("notificacao"),this.spritesnoti=this.notificacao.findComponent("sprite"),this.semova.enabled=!1,this.semova.element.opacity=0,this.semova.element.outlineThickness=0,this.notificacao.enabled=!1,this.textoescrito=this.semova,this.podeiniciarchefe=!1},Animacaonoti.prototype.update=function(t){this.app.root.findByName("Papel_Jogar").script.selecionarPapel.telademenu2||setTimeout((()=>{this.podeiniciarchefe=!0,this.semova.enabled=!0}),2e3),this.exefadein&&this.fadeInTexto(this.textoescrito),this.exefadeout&&this.fadeOutTexto(this.textoescrito),this.podeiniciarchefe&&!this.sairdoloop&&(this.notificacao.enabled=!0,this.sairdoloop=!0,this.iniciarAnimacoes())},Animacaonoti.prototype.iniciarAnimacoes=function(){setTimeout((()=>{this.spritesnoti.play("desaparecendonoti"),this.exefadein=!0}),1e3),setTimeout((()=>{this.spritesnoti.play("aparecendonoti"),this.exefadeout=!0}),7e3),setTimeout((()=>{this.textoescrito=this.lanternanoti,this.spritesnoti.play("desaparecendonoti"),this.exefadein=!0,this.semova.enabled=!1}),12e3),setTimeout((()=>{this.spritesnoti.play("aparecendonoti"),this.exefadeout=!0}),16e3),setTimeout((()=>{this.textoescrito=null,this.lanternanoti.enabled=!1}),2e4),setTimeout((()=>{this.semova.element.opacity=0,this.lanternanoti.element.opacity=0}),25e3)},Animacaonoti.prototype.iniciarAnimApertarB=function(){setTimeout((()=>{this.textoescrito=this.inventnoti,this.spritesnoti.play("desaparecendonoti"),this.exefadein=!0}),1e3),setTimeout((()=>{this.textoescrito=this.inventnoti,this.spritesnoti.play("aparecendonoti"),this.exefadeout=!0}),1e4),setTimeout((()=>{this.inventnoti.element.opacity=0,this.inventnoti.enabled=!1}),15e3)},Animacaonoti.prototype.fadeInTexto=function(t){t.element.opacity=Math.min(t.element.opacity+.05,1),t.element.outlineThickness=Math.min(t.element.outlineThickness+.05,1),t.element.opacity>=1&&(this.exefadein=!1)},Animacaonoti.prototype.fadeOutTexto=function(t){t.element.opacity=Math.max(t.element.opacity-.05,0),t.element.outlineThickness=Math.max(t.element.outlineThickness-.05,0),t.element.opacity<=0&&(this.exefadeout=!1)};var Motion=pc.createScript("motion");Motion.attributes.add("motions",{type:"json",schema:[{name:"name",type:"string"},{name:"position",type:"curve",curves:["x","y","z"]},{name:"rotation",type:"curve",curves:["x","y","z"]},{name:"scale",type:"curve",curves:["x","y","z"]},{name:"speed",type:"number",default:1},{name:"autoplay",type:"boolean",default:!1},{name:"loop",type:"boolean",default:!1}],array:!0}),Motion.attributes.add("events",{type:"json",schema:[{name:"animationName",type:"string"},{name:"eventName",type:"string"},{name:"time",type:"number",default:1},{name:"type",type:"string",default:"Anytime",enum:[{Anytime:"Anytime"},{Start:"Start"},{End:"End"}]}],array:!0}),Motion.attributes.add("lerp",{type:"number",default:.5}),Motion.prototype.initialize=function(){this.timestamp=0,this.currentSpeed=0,this.currentMotion=!1,this.isReverting=!1,this.startPosition=this.entity.getLocalPosition().clone(),this.startRotation=this.entity.getLocalEulerAngles().clone(),this.startScale=this.entity.getLocalScale().clone(),this.position=new pc.Vec3(0,0,0),this.rotation=new pc.Vec3(0,0,0),this.scale=new pc.Vec3(0,0,0),this.motions.length>0&&this.motions[0].autoplay&&this.onMotionPlay(this.motions[0].name),this.app.on("Motion",this.onMotionPlay,this),this.app.on("Motion:Stop",this.onMotionStop,this),this.entity.on("Motion",this.onMotionPlay,this),this.entity.on("Motion:Stop",this.onMotionStop,this)},Motion.prototype.findMotion=function(t){var i=!1;for(var n in this.motions){var e=this.motions[n];e.name==t&&(i=e)}return i},Motion.prototype.onMotionStop=function(t){this.currentMotion&&this.currentMotion.name==t&&(this.isPlaying=!1,this.currentMotion=!1)},Motion.prototype.onMotionPlay=function(t,i){if(!i&&this.currentMotion&&this.currentMotion.name==t)return!1;var n=this.findMotion(t);if(!n)return!1;this.isPlaying=!0,this.timestamp=0,this.currentMotion=n,this.triggerStartEvent(this.currentMotion)},Motion.prototype.triggerEvents=function(t){for(var i in this.events){var n=this.events[i],e=n.time;n.animationName==this.currentMotion.name&&e>this.timestamp&&e<=this.timestamp+t&&this.app.fire(n.eventName)}},Motion.prototype.findEventByMotion=function(t,i){for(var n in this.events){var e=this.events[n];if(e.animationName==t.name&&e.type==i)return e}},Motion.prototype.triggerStartEvent=function(t){var i=this.findEventByMotion(t,"Start");i&&this.app.fire(i.eventName)},Motion.prototype.triggerEndEvent=function(t){var i=this.findEventByMotion(t,"End");i&&this.app.fire(i.eventName)},Motion.prototype.update=function(t){if(!this.isPlaying)return!1;if(!this.currentMotion)return!1;var i=this.currentMotion.position.value(this.timestamp),n=this.currentMotion.rotation.value(this.timestamp),e=this.currentMotion.scale.value(this.timestamp);this.position=this.position.lerp(this.position,new pc.Vec3(i[0],i[1],i[2]),this.lerp),this.rotation=this.rotation.lerp(this.rotation,new pc.Vec3(n[0],n[1],n[2]),this.lerp),this.scale=this.scale.lerp(this.scale,new pc.Vec3(e[0],e[1],e[2]),this.lerp),this.entity.setLocalPosition(this.position.clone().add(this.startPosition)),this.entity.setLocalEulerAngles(this.rotation.clone().add(this.startRotation)),this.entity.setLocalScale(this.scale.clone().add(this.startScale)),this.triggerEvents(t),this.timestamp>=1&&(this.isPlaying=!1,this.currentMotion.loop?this.onMotionPlay(this.currentMotion.name,!0):(this.triggerEndEvent(this.currentMotion),this.currentMotion=!1)),this.isReverting?(this.timestamp-=t*this.currentMotion.speed,this.timestamp<=0&&(this.triggerEndEvent(this.currentMotion),this.currentMotion=!1,this.isPlaying=!1,this.isReverting=!1)):this.timestamp+=t*this.currentMotion.speed,this.timestamp=Math.max(this.timestamp,0),this.timestamp=Math.min(this.timestamp,1)};var VideoTexture3=pc.createScript("videoTexture3");VideoTexture3.attributes.add("videoAsset",{type:"asset"}),VideoTexture3.attributes.add("cameraEntity",{type:"entity"}),VideoTexture3.prototype.initialize=function(){var e=this.videoAsset;this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.movimentarCamera=this.cameraEntity.script.movimentarCamera;var t=e.getFileUrl();this.video=document.createElement("video"),this.video.src=t,this.video.loop=!0,this.video.muted=!0,this.video.playsInline=!0,this.video.crossOrigin="anonymous",this.japrey=!0,this.videoTexture=new pc.Texture(this.app.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,autoMipmap:!0});var i=this.entity.model.meshInstances[0].material;i.diffuseMap=this.videoTexture,i.update()},VideoTexture3.prototype.update=function(e){this.togglevideo=this.app.root.findByName("Camera").script.movimentarCamera.videoprol,this.togglevideo&&this.japrey&&(this.video.play(),this.japrey=!1),this.video.readyState>=this.video.HAVE_CURRENT_DATA&&this.videoTexture.setSource(this.video)};var Teste=pc.createScript("teste");Teste.prototype.initialize=function(){this.app.on("subirLivro",(function(i){this.fecharLivro=!1,this.subirlivro=i,this.abrirLivro=i,this.entity.fire("Motion","SubirLivro"),this.frameIndex=0,this.entity.element.spriteFrame=0}),this),this.app.on("descerLivro",(function(i){this.subirlivro=!1,this.abrirLivro=!1,this.fecharLivro=i,setTimeout((()=>{this.entity.fire("Motion","DescerLivro")}),1e3)}),this),this.resetarlivro=!1,this.frameIndex=0,this.timeElapsed=0,this.frameDuration=.01,this.sprite=this.entity.element.sprite,this.totalFrames=this.sprite.frameKeys.length,this.abrirLivro=!1,this.fecharLivro=!1,this.subirlivro=!1},Teste.prototype.update=function(i){this.timeElapsed+=i,this.abrirLivro&&this.frameIndex<18&&(this.subirlivro=!0,this.timeElapsed>=this.frameDuration&&(this.timeElapsed=0,this.frameIndex=Math.min(this.frameIndex+1,18),this.entity.element.spriteFrame=this.frameIndex)),this.fecharLivro&&this.frameIndex>=18&&this.frameIndex<31&&this.timeElapsed>=this.frameDuration&&(this.timeElapsed=0,this.frameIndex=Math.min(this.frameIndex+1,31),this.entity.element.spriteFrame=this.frameIndex),31===this.frameIndex&&(this.fecharLivro=!1,this.abrirLivro=!1,this.timeElapsed=0)};var MovimentarCameraTabu=pc.createScript("movimentarCameraTabu");MovimentarCameraTabu.prototype.initialize=function(){this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this),this.estanotabu=!1},MovimentarCameraTabu.prototype.onKeyDown=function(t){t.key===pc.KEY_W&&this.estanotabu&&(this.entity.setLocalPosition(.124,2.319,2.719),this.entity.setLocalEulerAngles(-45.95,0,0),console.log("Câmera indo pro meio do tabu..")),t.key===pc.KEY_S&&this.estanotabu&&(this.entity.setLocalPosition(.477,2.298,4.359),this.entity.setLocalEulerAngles(-26.85,0,0),console.log("Câmera voltando para saque de carta.."))},MovimentarCameraTabu.prototype.qualTarget=function(){},MovimentarCameraTabu.prototype.update=function(t){};var ControleObjetos=pc.createScript("controleObjetos");ControleObjetos.prototype.initialize=function(){this.podeabriragel=!1,this.japassouveri=!1,this.estanagel=!1,this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this)},ControleObjetos.prototype.update=function(e){"portagel"!==this.entity.name||this.japassouveri||(this.podeabriragel=!0,this.japassouveri=!0)},ControleObjetos.prototype.onKeyDown=function(e){e.key===pc.KEY_S&&this.podeabriragel&&this.estanagel&&(console.log("teste de galedeira"),this.app.fire("Motion","abrirgeladeira")),e.key===pc.KEY_W&&this.podeabriragel&&this.estanagel&&(console.log("teste de  geladeira fechar"),this.app.fire("Motion","fechargeladeira"))};var CameraEaster=pc.createScript("cameraEaster");CameraEaster.prototype.initialize=function(){this.images=[this.app.root.findByName("TheLastOfWeverson"),this.app.root.findByName("ResidentWeverson"),this.app.root.findByName("CyberWeverson"),this.app.root.findByName("RedWeversonRedemption"),this.app.root.findByName("WeversonArkhanKnight"),this.app.root.findByName("SuperWeversonOdyssey"),this.app.root.findByName("GrandWeversonAuto"),this.app.root.findByName("MineirinhoWeversonAdventures"),this.app.root.findByName("FortWeverson"),this.app.root.findByName("HaloWeverson"),this.app.root.findByName("AssassinsWeverson"),this.app.root.findByName("GodofWev"),this.app.root.findByName("WeversonMafia"),this.app.root.findByName("WeversonSouls"),this.app.root.findByName("TheAmazingWeverson"),this.app.root.findByName("DeadWeverson"),this.app.root.findByName("FifaWeverson"),this.app.root.findByName("HollowWeverson")],this.currentIndex=0,this.defaultScale=new pc.Vec3(.05,.05,.05),this.botaoDireita=this.app.root.findByName("BotaoDireita"),this.botaoEsquerda=this.app.root.findByName("BotaoEsquerda"),this.botaoVoltar=this.app.root.findByName("voltar"),this.objcontrolecam=this.app.root.findByName("ObjetoControleCamera"),this.updateImages(),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.entity.enabled=!1},CameraEaster.prototype.updateImages=function(){for(var e=0;e<this.images.length;e++)this.images[e]&&(this.images[e].enabled=e===this.currentIndex,this.images[e].setLocalScale(this.defaultScale))},CameraEaster.prototype.onMouseDown=function(e){var t=this.entity.camera.screenToWorld(e.x,e.y,this.entity.camera.nearClip),a=this.entity.camera.screenToWorld(e.x,e.y,this.entity.camera.farClip),i=this.app.systems.rigidbody.raycastFirst(t,a);i&&i.entity&&(i.entity===this.botaoDireita?this.nextImage():i.entity===this.botaoEsquerda?this.previousImage():i.entity===this.botaoVoltar&&(this.objcontrolecam.script.controleCamera.mudarcameraeaster=!0))},CameraEaster.prototype.nextImage=function(){this.currentIndex++,this.currentIndex>=this.images.length&&(this.currentIndex=0),this.updateImages()},CameraEaster.prototype.previousImage=function(){this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.updateImages()};var ControleObj3d=pc.createScript("controleObj3d");ControleObj3d.prototype.gruposObjetos={Quarto:"ObjetosQuarto",Sala:"ObjetosSala",Banheiro:"ObjetosBanheiro",Cozinha:"ObjetosCozinha",Garagem:"ObjetosGaragem"},ControleObj3d.prototype.initialize=function(){this.desativarTodosObjetos(),console.log("Sistema de controle de zonas pronto para uso via script")},ControleObj3d.prototype.atualizarZona=function(o){if(!this.gruposObjetos[o])return console.warn(`Zona "${o}" não encontrada no mapeamento`),!1;console.log(`Ativando zona: ${o}`),this.desativarTodosObjetos();const t=this.gruposObjetos[o],e=this.app.root.findByName(t);return e?(e.enabled=!0,console.log(`Grupo ativado: ${t}`),!0):(console.warn(`Grupo de objetos não encontrado: ${t}`),!1)},ControleObj3d.prototype.desativarTodosObjetos=function(){for(const o in this.gruposObjetos){const t=this.gruposObjetos[o],e=this.app.root.findByName(t);e&&(e.enabled=!1)}console.log("Todos os grupos de objetos foram desativados")},ControleObj3d.prototype.atualizarMultiplasZonas=function(o){this.desativarTodosObjetos(),o.forEach((o=>{const t=this.gruposObjetos[o];if(t){const o=this.app.root.findByName(t);o&&(o.enabled=!0,console.log(`Grupo ativado: ${t}`))}}))};var Configs=pc.createScript("configs");Configs.attributes.add("telaconfig",{type:"entity"}),Configs.prototype.initialize=function(){},Configs.prototype.update=function(i){this.naconfig=this.entity.script.selecionarPapel.nas_opcoes,this.naconfig?(this.telaconfig.enabled=!0,this.app.podeclicar2=!1):this.naconfig||(this.telaconfig.enabled=!1,this.app.podeclicar2=!0)};var BotoesConfig=pc.createScript("botoesConfig");BotoesConfig.attributes.add("papelconfig",{type:"entity"}),BotoesConfig.attributes.add("botaoResolucao",{type:"entity"}),BotoesConfig.attributes.add("botaoSair",{type:"entity"}),BotoesConfig.prototype.initialize=function(){this.currentResolutionIndex=0,this.naconfig=!1,this.app.fechartelafaca=!1,this.botaoSair&&this.botaoSair.element.on("click",this.sairConfig,this)},BotoesConfig.prototype.sairConfig=function(){this.papelconfig&&this.papelconfig.script.selecionarPapel&&(this.papelconfig.script.selecionarPapel.nas_opcoes=!1,this.app.root.findByName("pasta").enabled=!0,this.app.root.findByName("Papel_Jogar").enabled=!0,this.app.podeclicar=!0),this.naconfig=!1},BotoesConfig.prototype.update=function(o){this.papelconfig&&this.papelconfig.script.selecionarPapel&&(this.naconfig=this.papelconfig.script.selecionarPapel.nas_opcoes)};var DropdownResolucao=pc.createScript("dropdownResolucao");DropdownResolucao.attributes.add("botaoPrincipal",{type:"entity"}),DropdownResolucao.attributes.add("opcoesPanel",{type:"entity"}),DropdownResolucao.attributes.add("opcoes",{type:"json",title:"Opções",description:"Lista de resoluções",schema:[{name:"label",type:"string",title:"Label",description:'Texto exibido (ex: "480p")'},{name:"width",type:"number",title:"Largura",description:"Largura em pixels"},{name:"height",type:"number",title:"Altura",description:"Altura em pixels"}],array:!0,default:[{label:"480p",width:854,height:480},{label:"720p",width:1280,height:720},{label:"1080p",width:1920,height:1080}]}),DropdownResolucao.prototype.initialize=function(){this.opcoesPanel.enabled=!1,this.botaoPrincipal.element.on("click",this.toggleOpcoes,this),this.opcoesPanel.children.forEach(((e,o)=>{e.element.on("click",(()=>{this.selecionarResolucao(o)}))}))},DropdownResolucao.prototype.toggleOpcoes=function(){this.opcoesPanel.enabled=!this.opcoesPanel.enabled},DropdownResolucao.prototype.selecionarResolucao=function(e){var o=this.opcoes[e];this.botaoPrincipal.element.text=o.label,this.app.graphicsDevice.setResolution(o.width,o.height),this.app.setCanvasFillMode(pc.FILLMODE_KEEP_ASPECT),this.opcoesPanel.enabled=!1,console.log("Resolução alterada para:",o.label)};var Trigger=pc.createScript("trigger");Trigger.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},Trigger.prototype.onTriggerEnter=function(i){i.rigidbody.linearVelocity=pc.Vec3.ZERO,i.rigidbody.angularVelocity=pc.Vec3.ZERO;var r=i.getPosition();i.rigidbody.teleport(r.x,10,0)};var ZonaTrigger=pc.createScript("zonaTrigger");ZonaTrigger.prototype.initialize=function(){this.entity.rigidbody.type=pc.BODYTYPE_KINEMATIC,this.entity.collision.detectCollisions=!1,this.entity.collision.detectTriggers=!0,this.entity.rigidbody.enableContactResponse=!1};var ScriptTarefas=pc.createScript("scriptTarefas");ScriptTarefas.attributes.add("quadroTarefa",{type:"entity",title:"Quadro Tarefa",description:'Arraste o Image Element "quadro_tarefa" aqui'}),ScriptTarefas.attributes.add("textoTarefa",{type:"entity",title:"Texto Tarefa",description:"Arraste o Text Element dentro do quadro aqui"}),ScriptTarefas.attributes.add("tarefas",{type:"json",title:"Lista de Tarefas",description:"Configure as tarefas disponíveis",schema:[{name:"numero",type:"number",title:"Número da Tarefa"},{name:"descricao",type:"string",title:"Descrição da Tarefa"}],array:!0,default:[{numero:1,descricao:"Converse com Jorge."},{numero:2,descricao:"Investigue a casa."},{numero:3,descricao:"Encontre a chave mestra."}]}),ScriptTarefas.attributes.add("tarefaAtualIndex",{type:"number",title:"Tarefa Atual (Índice)",description:"Índice da tarefa atual no array",default:0}),ScriptTarefas.prototype.initialize=function(){this.quadroTarefa&&this.textoTarefa?(this.atualizarTarefa(),this.quadroTarefa.enabled=!0,this.toggleQuadroTarefa()):console.error("Elementos UI não configurados!")},ScriptTarefas.prototype.atualizarTarefa=function(){if(0===this.tarefas.length)return void console.warn("Nenhuma tarefa configurada!");this.tarefaAtualIndex=pc.math.clamp(this.tarefaAtualIndex,0,this.tarefas.length-1);const a=this.tarefas[this.tarefaAtualIndex];this.textoTarefa.element.text=`Tarefa [${a.numero}]: ${a.descricao}`,console.log(`Tarefa atualizada para: ${a.numero} - ${a.descricao}`)},ScriptTarefas.prototype.proximaTarefa=function(){this.tarefaAtualIndex<this.tarefas.length-1?(this.tarefaAtualIndex++,this.atualizarTarefa()):console.log("Não há mais tarefas!")},ScriptTarefas.prototype.tarefaAnterior=function(){this.tarefaAtualIndex>0?(this.tarefaAtualIndex--,this.atualizarTarefa()):console.log("Esta já é a primeira tarefa!")},ScriptTarefas.prototype.definirTarefaPorNumero=function(a){const e=this.tarefas.findIndex((e=>e.numero===a));-1!==e?(this.tarefaAtualIndex=e,this.atualizarTarefa()):console.warn(`Tarefa número ${a} não encontrada!`)},ScriptTarefas.prototype.toggleQuadroTarefa=function(){this.quadroTarefa.enabled=!this.quadroTarefa.enabled,console.log("Quadro de tarefas "+(this.quadroTarefa.enabled?"visível":"oculto"))};var CameraObjetos=pc.createScript("cameraObjetos");CameraObjetos.prototype.initialize=function(){this.app.camera_objetos=!1,this.podemexer=!1,this.colidortela=this.app.root.findByName("colisores3d"),this.colidortela.enabled=!1,this.posicaoCamera=0,this.cooldown=!1,this.cooldownDuration=1,this.cooldownTimer=0,this.pravoltarDuration=1,this.prapertoDuration=1,this.animationTimer=0,this.isPlayingAnimation=!1,this.app.estanocadeado=!1,this.onKeyDown=this.onKeyDown.bind(this),this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown),this.entity.fire("Motion","idle"),console.log("CameraObjetos inicializado. Posição inicial: "+(0===this.posicaoCamera?"Atrás":"Frente"))},CameraObjetos.prototype.onKeyDown=function(o){if(this.podemexer&&!this.cooldown&&!this.isPlayingAnimation)return o.key!==pc.KEY_W||0!==this.posicaoCamera||this.app.estanocadeado||(this.startAnimationSequence("praperto","idle_perto",1),this.app.podeclicarfaca=!0,this.colidortela.enabled=!0),o.key!==pc.KEY_S||1!==this.posicaoCamera||this.app.estanocadeado||(this.startAnimationSequence("pravoltar","idle",0),this.app.podeclicarfaca=!1,this.colidortela.enabled=!1),o.key!==pc.KEY_S||!this.app.estanocadeado||this.cooldown||this.isPlayingAnimation?void 0:(console.log("🔙 Retornando da interação com toolbox"),this.startAnimationSequence("toolbox_pralonge","idle",0),void(this.app.estanocadeado=!1))},CameraObjetos.prototype.startAnimationSequence=function(o,i,t){this.startCooldown(),this.isPlayingAnimation=!0,this.currentAnimation=o,this.nextAnimation=i,this.animationTimer=0,this.novaPosicao=t,this.entity.fire("Motion",o),console.log("Iniciando animação:",o)},CameraObjetos.prototype.startCooldown=function(){this.cooldown=!0,this.cooldownTimer=0},CameraObjetos.prototype.update=function(o){if(this.podemexer=this.app.camera_objetos,this.cooldown&&(this.cooldownTimer+=o,this.cooldownTimer>=this.cooldownDuration&&(this.cooldown=!1)),this.isPlayingAnimation){this.animationTimer+=o;const i="praperto"===this.currentAnimation?this.prapertoDuration:this.pravoltarDuration;this.animationTimer>=i&&(this.isPlayingAnimation=!1,this.posicaoCamera=this.novaPosicao,this.entity.fire("Motion",this.nextAnimation),console.log("Transição para:",this.nextAnimation,"| Nova posição:",0===this.posicaoCamera?"Atrás":"Frente"))}},CameraObjetos.prototype.destroy=function(){this.app&&this.app.keyboard&&this.app.keyboard.off(pc.EVENT_KEYDOWN,this.onKeyDown),console.log("CameraObjetos destruído")};var Objfaca=pc.createScript("objfaca");Objfaca.prototype.initialize=function(){this.mouseOver=!1,this.app.itemfaca=this.app.itemfaca||!1,this.colisor=this.app.root.findByName("colisorfaca"),this.colisor&&this.colisor.button?(this.hasRender=this.entity.render&&this.entity.render.meshInstances,console.log("🔍 Faca tem renderização?",this.hasRender),this.colisor.button.on("mouseenter",this.onMouseEnter,this),this.colisor.button.on("mouseleave",this.onMouseLeave,this),this.colisor.button.on("click",this.onClick,this),console.log("✅ Script da faca pronto!"),this.entity.fire("Motion","descerfaca")):console.error("❌ Botão colisorfaca não encontrado ou sem componente Button!")},Objfaca.prototype.onMouseEnter=function(){this.app.podeclicarfaca&&(this.app.itemfaca||(this.mouseOver=!0,document.body.style.cursor="pointer",console.log("🖱️ Mouse sobre a faca"),this.entity.fire("Motion","subirfaca"),this.setOutline(!0)))},Objfaca.prototype.onMouseLeave=function(){this.app.itemfaca||(this.mouseOver=!1,document.body.style.cursor="",console.log("🚪 Mouse saiu da faca"),this.entity.fire("Motion","descerfaca"),this.setOutline(!1))},Objfaca.prototype.onClick=function(){this.mouseOver&&this.app.podeclicarfaca&&!this.app.itemfaca&&(console.log("🎉 Faca coletada!"),document.body.style.cursor="",this.app.itemfaca=!0,this.app.root.findByName("FacaDOKRL").enabled=!0,this.app.root.findByName("Jorge1").enabled=!1,this.app.root.findByName("Jorge2").enabled=!0,this.app.root.findByName("VorpalBladecozinha").enabled=!1,this.app.root.findByName("tela_tarefas").script.scriptTarefas.proximaTarefa(),this.app.root.findByName("objeto_adquirido").enabled=!0,this.app.root.findByName("faca_item_UI").enabled=!0,this.app.root.findByName("MsgFaca").enabled=!0,this.app.root.findByName("chavedefenda_item_UI").enabled=!1,this.app.root.findByName("MsgChavedeFenda").enabled=!1,this.app.root.findByName("BotaoVoltar").enabled=!1,setTimeout((()=>{this.app.tempobotaoEsquerdoMouseFaca=!0}),3e3),this.entity.enabled=!1,this.onMouseLeave())},Objfaca.prototype.setOutline=function(t){this.hasRender?this.entity.render.meshInstances.forEach((e=>{e.material&&(e.material.emissive=t?new pc.Color(1,0,0):new pc.Color(0,0,0),e.material.update())})):this.entity.outline?this.entity.outline.enabled=t:t?this.entity.setLocalScale(1.05,1.05,1.05):this.entity.setLocalScale(1,1,1)},Objfaca.prototype.destroy=function(){this.colisor?.button&&(this.colisor.button.off("mouseenter",this.onMouseEnter,this),this.colisor.button.off("mouseleave",this.onMouseLeave,this),this.colisor.button.off("click",this.onClick,this))};var SpriteUianim=pc.createScript("spriteUianim");SpriteUianim.attributes.add("frameRate",{type:"number",default:12,title:"Frames por Segundo"}),SpriteUianim.attributes.add("loop",{type:"boolean",default:!0,title:"Repetir Animação"}),SpriteUianim.prototype.initialize=function(){this.entity.element&&this.entity.element.type===pc.ELEMENTTYPE_IMAGE?(this.element=this.entity.element,this.currentFrame=0,this.frameTimer=0,this.isPlaying=!1,this.isReady=!1,this.tempoWS=0,this.element.spriteAsset?this._initSpriteAnimation():console.error("Atribua um Sprite Asset no componente Element")):console.error("Elemento deve ser do tipo IMAGE")},SpriteUianim.prototype._initSpriteAnimation=function(){var t=this.app.assets.get(this.element.spriteAsset);t?t.resource?this._onAssetReady(t):(t.ready(this._onAssetReady.bind(this)),t.loading||this.app.assets.load(t)):console.error("Sprite Asset não encontrado no registry")},SpriteUianim.prototype._onAssetReady=function(t){t.resource?.atlas?.frames&&0!==t.resource.atlas.frames.length?("BotaoMouse"===this.entity.name?this.totalFrames=6:"WSbutao"===this.entity.name&&(this.totalFrames=64),this.isReady=!0,console.log("Animação pronta com",this.totalFrames,"frames"),this.play()):console.error("Sprite Asset não contém frames válidos")},SpriteUianim.prototype.fadeSpeed=1,SpriteUianim.prototype.update=function(t){if(this.app.tempobotaoWS&&"WSbutao"===this.entity.name){const e=t/this.fadeSpeed;this.entity.element.opacity=Math.max(0,this.entity.element.opacity-e)}if(this.app.tempobotaoEsquerdoMouseFaca&&"BotaoMouse"===this.entity.name){const e=t/this.fadeSpeed,i=Math.min(e,.05);this.entity.element.opacity=Math.min(1,this.entity.element.opacity+i),this.entity.element.opacity>=.99&&(this.app.fechartelafaca=!0)}this.isReady&&this.isPlaying&&(this.frameTimer+=t,this.frameTimer>=1/this.frameRate&&(this.frameTimer=0,this._advanceFrame()))},SpriteUianim.prototype._advanceFrame=function(){this.currentFrame++,this.currentFrame>=this.totalFrames&&(this.loop?this.currentFrame=0:(this.currentFrame=this.totalFrames-1,this.isPlaying=!1)),this._updateFrame()},SpriteUianim.prototype._updateFrame=function(){this.element.spriteFrame=this.currentFrame},SpriteUianim.prototype.play=function(){this.isReady&&(this.isPlaying=!0)},SpriteUianim.prototype.pause=function(){this.isPlaying=!1},SpriteUianim.prototype.stop=function(){this.pause(),this.currentFrame=0,this._updateFrame()},SpriteUianim.prototype.destroy=function(){if(this.element?.spriteAsset){var t=this.app.assets.get(this.element.spriteAsset);t&&t.off("load",this._onAssetReady)}};var BotoesDebug=pc.createScript("botoesDebug");BotoesDebug.attributes.add("mainCamera",{type:"entity"}),BotoesDebug.attributes.add("camera2d",{type:"entity"}),BotoesDebug.attributes.add("cameraOBJ",{type:"entity"}),BotoesDebug.prototype.initialize=function(){this.app.tempobotaoWS=!1,this.app.tempobotaoEsquerdoMouseFaca=!1,this.entity.element.on("click",this.onClick,this)},BotoesDebug.prototype.onClick=function(){switch(this.entity.name){case"BotaoObjetos":this.app.root.findByName("controleZona").script.controleObj3d.atualizarZona("Garagem"),this.mainCamera.enabled=!1,this.camera2d.enabled=!1,this.cameraOBJ.enabled=!0,this.app.camera_objetos=!0,this.app.podeclicar=!1,this.app.podeclicar2=!1,this.app.root.findByName("tela_faca_tutorial").enabled=!1,this.app.root.findByName("colisorfaca").enabled=!1,this.app.root.findByName("colisorcadeado").enabled=!0,this.app.japassounoalicate=!0,setTimeout((()=>{this.app.tempobotaoWS=!0}),9e3),console.log(this.mainCamera.enabled),console.log(this.camera2d.enabled),console.log(this.cameraOBJ.enabled);break;case"BotaoGuitarHero":case"BotaoCartas":break;case"BotaoVoltarMenu":this.mainCamera.enabled=!0,this.camera2d.enabled=!1,this.app.camera_objetos=!1,this.app.podeclicar=!0,this.app.podeclicar2=!0;const e=this.cameraOBJ;e.script&&e.script.vignette&&(e.script.vignette.enabled=!1),e.script&&e.script.sepia&&(e.script.vignette.enabled=!1),this.cameraOBJ.enabled=!1,this.app.root.findByName("tela_faca_tutorial").enabled=!1,console.log(this.mainCamera.enabled),console.log(this.camera2d.enabled),console.log(this.cameraOBJ.enabled)}console.log("Botão clicado:",this.entity.name)},BotoesDebug.prototype.destroy=function(){this.entity.element.off("click",this.onClick,this)};var Scriptfechartelaitens=pc.createScript("scriptfechartelaitens");Scriptfechartelaitens.prototype.initialize=function(){this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this)},Scriptfechartelaitens.prototype.onMouseDown=function(){this.app.fechartelafaca&&(this.app.root.findByName("BotaoVoltar").enabled=!0,this.entity.enabled=!1)},Scriptfechartelaitens.prototype.update=function(t){},Scriptfechartelaitens.prototype.destroy=function(){this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this)};var BotaoVoltar=pc.createScript("botaoVoltar");BotaoVoltar.attributes.add("mainCamera",{type:"entity"}),BotaoVoltar.attributes.add("camera2d",{type:"entity"}),BotaoVoltar.attributes.add("cameraOBJ",{type:"entity"}),BotaoVoltar.attributes.add("objcomdiag",{type:"entity"}),BotaoVoltar.prototype.initialize=function(){this.originalColor=this.entity.element.color.clone(),this.entity.element.on("mouseenter",(function(){this.entity.element.color=new pc.Color(.6,.6,.6)}),this),this.entity.element.on("mouseleave",(function(){this.entity.element.color=this.originalColor}),this),this.entity.element.on("mousedown",(function(t){this.mainCamera.enabled=!1,this.app.root.findByName("Player").script.movimentarPlayer.estaemalgumitem=!1;const e=this.cameraOBJ;e.script&&e.script.vignette&&(e.script.vignette.enabled=!1),e.script&&e.script.sepia&&(e.script.vignette.enabled=!1),e.enabled=!1,this.app.camera_objetos=!1,console.log("Botão voltar clicado"),this.app.root.findByName("tela_faca_tutorial").enabled=!1,this.app.root.findByName("colisorfaca").enabled=!1,this.app.root.findByName("colisorcadeado").enabled=!1,this.app.itemfaca&&!this.app.jachamoufawn&&(this.objcomdiag.script.dialogueSystem.setDialogue(5),this.app.jachamoufawn=!0),this.app.itemchavedefenda&&!this.app.jachamoufawn2&&(this.app.root.findByName("Jorge5").enabled=!0,this.app.root.findByName("Jorge4").enabled=!1,this.app.root.findByName("tela_tarefas").enabled=!1,this.app.root.findByName("Interagirtoolbox").enabled=!1,this.objcomdiag.script.dialogueSystem.setDialogue(17),this.app.jachamoufawn2=!0)}),this)};var TarefaMenuTexto=pc.createScript("tarefaMenuTexto");TarefaMenuTexto.attributes.add("textoElemento",{type:"entity",title:"Elemento de Texto",description:"Arraste aqui o Text Element que vai exibir a descrição personalizada"}),TarefaMenuTexto.attributes.add("scriptTarefasEntity",{type:"entity",title:"Entidade com scriptTarefas",description:"Arraste aqui a entidade que possui o scriptTarefas"}),TarefaMenuTexto.prototype.initialize=function(){this.descricoes={1:"Chegando em um lugar assustador...",2:"Um assassino misterioso...",3:"Jorge é um pouco ignorante, mas pelo menos sei oque fazer",4:"Preciso descobrir oque aconteceu nessa casa...",5:"Usei poucas vezes Luminol na minha vida, mas é como dizem, é errando que se aprende...",6:"Preciso falar com Jorge sobre oque encontrei no banheiro",7:"Um cofre no quarto, me parece promissor...",8:"Tinha bastante dinheiro no cofre, mas o assassino não levou nada, muito estranho...",9:"Jorge parecia bastante animado com o carro da vítima, ele me lembra meu avo",10:"Bingo! uma ferramenta muito bem guardada para apenas consertar coisas, deveria avisar Jorge sobre isso"},this.scriptTarefas=this.scriptTarefasEntity.script.scriptTarefas,this.scriptTarefas&&this.textoElemento?(this.tarefaAnterior=-1,this.updateTexto()):console.error("scriptTarefas ou textoElemento não configurado corretamente!")},TarefaMenuTexto.prototype.update=function(e){const a=this.scriptTarefas.tarefas[this.scriptTarefas.tarefaAtualIndex];a&&a.numero!==this.tarefaAnterior&&(this.updateTexto(),this.tarefaAnterior=a.numero)},TarefaMenuTexto.prototype.updateTexto=function(){const e=this.scriptTarefas.tarefas[this.scriptTarefas.tarefaAtualIndex];if(!e)return;const a=this.descricoes[e.numero]||"Sem descrição personalizada.";this.textoElemento.element.text=a,console.log(`Descrição personalizada atualizada: Tarefa ${e.numero} - ${a}`)};var ItemInventario=pc.createScript("itemInventario");ItemInventario.prototype.initialize=function(){this.app.root.findByName("quadro_descricao_faca").enabled=!1,this.app.root.findByName("quadro_descricao_lanterna").enabled=!1,this.app.root.findByName("quadro_descricao_luminol").enabled=!1,this.descricoes={FacaDOKRL:this.app.root.findByName("quadro_descricao_faca"),LanternaDOKRL:this.app.root.findByName("quadro_descricao_lanterna"),LuminolDOKRL:this.app.root.findByName("quadro_descricao_luminol")};for(let t in this.descricoes)this.descricoes[t]&&(this.descricoes[t].enabled=!1);this.addEvents(),this.atualizarItem(),this.entity.on("enable",this.atualizarItem,this)},ItemInventario.prototype.update=function(t){this.atualizarItem()},ItemInventario.prototype.addEvents=function(){this.entity.element&&(this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mouseleave",this.onLeave,this))},ItemInventario.prototype.atualizarItem=function(){"FacaDOKRL"===this.entity.name?this.entity.enabled=!!this.app.itemfaca:"LuminolDOKRL"===this.entity.name?this.entity.enabled=!!this.app.itemluminol:"LanternaDOKRL"===this.entity.name&&(this.entity.enabled=!!this.app.itemlanterna);let t=0;this.app.itemfaca&&t++,this.app.itemlanterna&&t++,this.app.itemluminol&&t++;let e=this.app.root.findByName("InventarioTextobaixo");e&&e.element&&(e.element.text=`[${t}/9]`)},ItemInventario.prototype.onEnter=function(){const t=this.descricoes[this.entity.name];t&&(t.enabled=!0)},ItemInventario.prototype.onLeave=function(){const t=this.descricoes[this.entity.name];t&&(t.enabled=!1)};var Objtoolbox=pc.createScript("objtoolbox");Objtoolbox.prototype.initialize=function(){this.app.podeclicarcadeado=!0,this.mouseOver=!1,this.jaInteragiu=!1,this.animacaoEmAndamento=!1,this.app.jaabriucaixa=!1,this.colisor=this.app.root.findByName("colisorcadeado"),this.colisorchave=this.app.root.findByName("colisorchavedefenda"),this.camera=this.app.root.findByName("CameraObj"),this.colisor&&this.colisor.button?this.colisorchave&&this.colisorchave.button?(this.hasRender=this.entity.render&&this.entity.render.meshInstances,this.colisor.button.on("mouseenter",this.onMouseEnter,this),this.colisor.button.on("mouseleave",this.onMouseLeave,this),this.colisor.button.on("click",this.onClick,this),this.colisorchave.button.on("mouseenter",this.onChaveMouseEnter,this),this.colisorchave.button.on("mouseleave",this.onChaveMouseLeave,this),this.colisorchave.button.on("click",this.onChaveClick,this),this.app.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),console.log("✅ Script do cadeado/toolbox pronto!")):console.error("❌ Botão colisorchavedefenda não encontrado ou sem componente Button!"):console.error("❌ Botão colisorcadeado não encontrado ou sem componente Button!")},Objtoolbox.prototype.onMouseEnter=function(){this.app.podeclicarcadeado&&!this.animacaoEmAndamento&&(this.mouseOver=!0,document.body.style.cursor="pointer")},Objtoolbox.prototype.onMouseLeave=function(){this.mouseOver=!1,document.body.style.cursor=""},Objtoolbox.prototype.onClick=function(){if(this.app.podeclicarcadeado&&!this.animacaoEmAndamento)if(this.jaInteragiu){if(this.app.japassounoalicate&&!this.app.jaabriucaixa){const o=this.app.root.findByName("Toolboxtampa");console.log("🔍 ToolBox_Lid:",o),this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(28),this.app.jaabriucaixa=!0,o.enabled=!1,document.body.style.cursor="",this.colisor.enabled=!1,this.colisorchave.enabled=!0,setTimeout((()=>{console.log("📐 Rotação atual:",o.getEulerAngles())}),100)}}else document.body.style.cursor="",console.log("🔓 Interação inicial com toolbox"),this.animacaoEmAndamento=!0,this.app.estanocadeado=!0,this.camera.fire("Motion","toolbox_praperto"),setTimeout((()=>{console.log("🎬 Animação toolbox_praperto finalizada"),this.animacaoEmAndamento=!1,this.jaInteragiu=!0,this.app.interagiucomcaixa=!0,this.app.root.findByName("DialogueBox").script.dialogueSystem.setDialogue(25),this.app.root.findByName("colisorcadeado").enabled=!1}),700)},Objtoolbox.prototype.onChaveClick=function(){console.log("🗝️ Chave de fenda coletada!"),this.app.itemchavedefenda=!0,this.app.root.findByName("FreeScrewdriver").enabled=!1,this.app.root.findByName("objeto_adquirido").enabled=!0,this.app.root.findByName("faca_item_UI").enabled=!1,this.app.root.findByName("MsgFaca").enabled=!1,this.app.root.findByName("chavedefenda_item_UI").enabled=!0,this.app.root.findByName("MsgChavedeFenda").enabled=!0,this.app.root.findByName("BotaoVoltar").enabled=!1,setTimeout((()=>{this.app.tempobotaoEsquerdoMouseFaca=!0}),3e3),this.colisorchave.enabled=!1,document.body.style.cursor=""},Objtoolbox.prototype.onChaveMouseEnter=function(){this.colisorchave.enabled&&(document.body.style.cursor="pointer")},Objtoolbox.prototype.onChaveMouseLeave=function(){document.body.style.cursor=""},Objtoolbox.prototype.destroy=function(){this.colisor?.button&&(this.colisor.button.off("mouseenter",this.onMouseEnter,this),this.colisor.button.off("mouseleave",this.onMouseLeave,this),this.colisor.button.off("click",this.onClick,this)),this.colisorchave?.button&&(this.colisorchave.button.off("mouseenter",this.onChaveMouseEnter,this),this.colisorchave.button.off("mouseleave",this.onChaveMouseLeave,this),this.colisorchave.button.off("click",this.onChaveClick,this)),this.app.keyboard.off(pc.EVENT_KEYDOWN,this.onKeyDown,this)};var DefeitosSonoros=pc.createScript("defeitosSonoros");DefeitosSonoros.attributes.add("somLanterna",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somPorta",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somDialogo",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somPapelPassar",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somPapelAceitar",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somDenied",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somRiser",{type:"asset",assetType:"audio"}),DefeitosSonoros.attributes.add("somAuraLight",{type:"asset",assetType:"audio"}),DefeitosSonoros.prototype.initialize=function(){this.entLanterna=this.criarSom(this.somLanterna),this.entPorta=this.criarSom(this.somPorta),this.entDialogo=this.criarSom(this.somDialogo),this.entPapelPassar=this.criarSom(this.somPapelPassar),this.entPapelAceitar=this.criarSom(this.somPapelAceitar),this.entDenied=this.criarSom(this.somDenied),this.entRiser=this.criarSom(this.somRiser),this.entAuraLight=this.criarSom(this.somAuraLight),this.slotDialogo=this.entDialogo?.sound?.slots?.efeito,console.log("🔊 Sistema de sons inicializado!")},DefeitosSonoros.prototype.criarSom=function(o){if(!o)return console.warn("⚠️ Asset de áudio não atribuído."),null;const t=new pc.Entity;return t.addComponent("sound"),t.sound.addSlot("efeito",{asset:o,loop:!1,volume:1,positional:!1}),this.app.root.addChild(t),t},DefeitosSonoros.prototype.iniciarSomDialogo=function(){this.slotDialogo&&!this.slotDialogo.isPlaying&&this.slotDialogo.play()},DefeitosSonoros.prototype.pararSomDialogo=function(){this.slotDialogo&&this.slotDialogo.isPlaying&&this.slotDialogo.stop()},DefeitosSonoros.prototype.playLanterna=function(){this.entLanterna?.sound?.slots?.efeito?.isPlaying&&this.entLanterna.sound.slots.efeito.stop(),this.entLanterna?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playPorta=function(){this.entPorta?.sound?.slots?.efeito?.isPlaying&&this.entPorta.sound.slots.efeito.stop(),this.entPorta?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playPapelTurn=function(){this.entPapelPassar?.sound?.slots?.efeito?.isPlaying&&this.entPapelPassar.sound.slots.efeito.stop(),this.entPapelPassar?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playPapelAceitar=function(){this.entPapelAceitar?.sound?.slots?.efeito?.isPlaying&&this.entPapelAceitar.sound.slots.efeito.stop(),this.entPapelAceitar?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playDenied=function(){this.entDenied?.sound?.slots?.efeito?.isPlaying&&this.entDenied.sound.slots.efeito.stop(),this.entDenied?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playRiser=function(){this.entRiser?.sound?.slots?.efeito?.isPlaying&&this.entRiser.sound.slots.efeito.stop(),this.entRiser?.sound?.slots?.efeito?.play()},DefeitosSonoros.prototype.playAuraLight=function(){this.entAuraLight?.sound?.slots?.efeito?.isPlaying&&this.entAuraLight.sound.slots.efeito.stop(),this.entAuraLight?.sound?.slots?.efeito?.play()};